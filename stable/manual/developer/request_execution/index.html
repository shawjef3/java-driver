

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Request execution | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/developer/request_execution/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../"
            src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../index.html">
                Manual
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Developer docs
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Request execution</span>
</div>
                    </div>
                
                <section id="request-execution">
<h1>Request execution<a class="headerlink" href="#request-execution" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="../netty_pipeline/">Netty pipeline</a> gives us the ability to send low-level protocol messages on
a single connection.</p>
<p>The request execution layer builds upon that to:</p>
<ul class="simple">
<li><p>manage multiple connections (many nodes, possibly many connections per node);</p></li>
<li><p>abstract the protocol layer behind higher-level, user-facing types.</p></li>
</ul>
<p>The session is the main entry point. <code class="docutils literal notranslate"><span class="pre">CqlSession</span></code> is the type that users will most likely reference
in their applications. It extends a more generic <code class="docutils literal notranslate"><span class="pre">Session</span></code> type, for the sake of extensibility; this
will be explained in <a class="reference external" href="#request-processors">Request processors</a>.</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>+----------------------------------+
<span class="p">|</span> Session                          <span class="p">|</span>
+----------------------------------+
<span class="p">|</span> ResultT execute<span class="o">(</span>                 <span class="p">|</span>
<span class="p">|</span>   RequestT, GenericType<span class="o">[</span>ResultT<span class="o">])</span><span class="p">|</span>
+----------------------------------+
                 ^
                 <span class="p">|</span>
+----------------+-----------------+
<span class="p">|</span> CqlSession                       <span class="p">|</span>
+----------------------------------+
<span class="p">|</span> ResultSet execute<span class="o">(</span>Statement<span class="o">)</span>     <span class="p">|</span>
+----------------+-----------------+
                 ^
                 <span class="p">|</span>
+----------------+-----------------+
<span class="p">|</span> DefaultSession                   <span class="p">|</span>
+----------------+-----------------+
                 <span class="p">|</span>
                 <span class="p">|</span>
                 <span class="p">|</span> <span class="m">1</span> per node +-------------+
                 +------------+ ChannelPool <span class="p">|</span>
                 <span class="p">|</span>            +----+--------+
                 <span class="p">|</span>                 <span class="p">|</span>
                 <span class="p">|</span>                 <span class="p">|</span>  n +---------------+
                 <span class="p">|</span>                 +----+ DriverChannel <span class="p">|</span>
                 <span class="p">|</span>                      +---------------+
                 <span class="p">|</span>
                 <span class="p">|</span>          <span class="m">1</span> +--------------------------+
                 +------------+ RequestProcessorRegistry <span class="p">|</span>
                              +----+---------------------+
                                   <span class="p">|</span>
                                   <span class="p">|</span>  n +---------------------------+
                                   +----+ RequestProcessor          <span class="p">|</span>
                                        +---------------------------+
                                        <span class="p">|</span> ResultT process<span class="o">(</span>RequestT<span class="o">)</span> <span class="p">|</span>
                                        +---------------------------+
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DefaultSession</span></code> contains the session implementation. It follows the <a class="reference external" href="../common/concurrency/#cold-path">confined inner
class</a> pattern to simplify concurrency.</p>
<section id="connection-pooling">
<h2>Connection pooling<a class="headerlink" href="#connection-pooling" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>+----------------------+       <span class="m">1</span> +------------+
<span class="p">|</span> ChannelPool          +---------+ ChannelSet <span class="p">|</span>
+----------------------+         +-----+------+
<span class="p">|</span> DriverChannel next<span class="o">()</span> <span class="p">|</span>               <span class="p">|</span>
+----------+-----------+              n<span class="p">|</span>
           <span class="p">|</span>                    +------+--------+
          <span class="m">1</span><span class="p">|</span>                    <span class="p">|</span> DriverChannel <span class="p">|</span>
    +------+-------+            +---------------+
    <span class="p">|</span> Reconnection <span class="p">|</span>
    +--------------+
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ChannelPool</span></code> handles the connections to a given node, for a given session. It follows the <a class="reference external" href="../common/concurrency/#cold-path">confined
inner class</a> pattern to simplify concurrency. There are a few
differences compared to the 3.x implementation:</p>
<section id="fixed-size">
<h3>Fixed size<a class="headerlink" href="#fixed-size" title="Permalink to this headline">¶</a></h3>
<p>The pool has a fixed number of connections, it doesn’t grow or shrink dynamically based on current
usage. In other words, there is no more “max” size, only a “core” size.</p>
<p>However, this size is specified in the configuration. If the value is changed at runtime, the driver
will detect it, and trigger a resize of all active pools.</p>
<p>The rationale for removing the dynamic behavior is that it introduced a ton of complexity in the
implementation and configuration, for unclear benefits: if the load fluctuates very rapidly, then
you need to provision for the max size anyway, so you might as well run with all the connections all
the time. If on the other hand the fluctuations are rare and predictable (e.g. peak for holiday
sales), then a manual configuration change is good enough.</p>
</section>
<section id="no-queuing">
<h3>No queuing<a class="headerlink" href="#no-queuing" title="Permalink to this headline">¶</a></h3>
<p>To get a connection to a node, client code calls <code class="docutils literal notranslate"><span class="pre">ChannelPool.next()</span></code>. This returns the less busy
connection, based on the the <code class="docutils literal notranslate"><span class="pre">getAvailableIds()</span></code> counter exposed by
<a class="reference external" href="netty_pipeline/#in-flight-handler">InFlightHandler</a>.</p>
<p>If all connections are busy, there is no queuing; the driver moves to the next node immediately. The
rationale is that it’s better to try another node that might be ready to reply, instead of
introducing an additional wait for each node. If the user wants queuing when all nodes are busy,
it’s better to do it at the session level with a <a class="reference external" href="../../core/throttling/">throttler</a>, which provides
more intuitive configuration.</p>
<p>Before 4.5.0, there was also no preemptive acquisition of the stream id outside of the event loop:
<code class="docutils literal notranslate"><span class="pre">getAvailableIds()</span></code> had volatile semantics, and a client could get a pooled connection that seemed
not busy, but fail to acquire a stream id when it later tried the actual write. This turned out to
not work well under high load, see <a class="reference external" href="https://datastax-oss.atlassian.net/browse/JAVA-2644">JAVA-2644</a>.</p>
<p>Starting with 4.5.0, we’ve reintroduced a stronger guarantee (reminiscent of how things worked in
3.x): clients <strong>must call <code class="docutils literal notranslate"><span class="pre">DriverChannel.preAcquireId()</span></code> exactly once before each write</strong>. If the
call succeeds, <code class="docutils literal notranslate"><span class="pre">getAvailableIds()</span></code> is incremented immediately, and the client is guaranteed that
there will be a stream id available for the write. <code class="docutils literal notranslate"><span class="pre">preAcquireId()</span></code> and <code class="docutils literal notranslate"><span class="pre">getAvailableIds()</span></code> have
atomic semantics, so we can distribute the load more accurately.</p>
<p>This comes at the cost of additional complexity: <strong>we must ensure that every write is pre-acquired
first</strong>, so that <code class="docutils literal notranslate"><span class="pre">getAvailableIds()</span></code> doesn’t get out of sync with the actual stream id usage inside
<code class="docutils literal notranslate"><span class="pre">InFlightHandler</span></code>. This is explained in detail in the javadocs of <code class="docutils literal notranslate"><span class="pre">DriverChannel.preAcquireId()</span></code>,
read them carefully.</p>
<p>The pool manages its channels with <code class="docutils literal notranslate"><span class="pre">ChannelSet</span></code>, a simple copy-on-write data structure.</p>
</section>
<section id="built-in-reconnection">
<h3>Built-in reconnection<a class="headerlink" href="#built-in-reconnection" title="Permalink to this headline">¶</a></h3>
<p>The pool has its own independent reconnection mechanism (based on the <code class="docutils literal notranslate"><span class="pre">Reconnection</span></code> utility class).
The goal is to keep the pool at its expected capacity: whenever a connection is lost, the task
starts and will try to reopen the missing connections at regular intervals.</p>
</section>
</section>
<section id="request-processors">
<h2>Request processors<a class="headerlink" href="#request-processors" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>+----------------------------------+
<span class="p">|</span> Session                          <span class="p">|</span>
+----------------------------------+
<span class="p">|</span> ResultT execute<span class="o">(</span>                 <span class="p">|</span>
<span class="p">|</span>   RequestT, GenericType<span class="o">[</span>ResultT<span class="o">])</span><span class="p">|</span>
+----------------------------------+
                 ^
                 <span class="p">|</span>
+----------------+-----------------+
<span class="p">|</span> CqlSession                       <span class="p">|</span>
+----------------------------------+
<span class="p">|</span> ResultSet execute<span class="o">(</span>Statement<span class="o">)</span>     <span class="p">|</span>
+----------------+-----------------+
</pre></div>
</div>
<p>The driver can execute different types of requests, in different ways. This is abstracted by the
top-level <code class="docutils literal notranslate"><span class="pre">Session</span></code> interface, with a very generic execution method:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">RequestT</span> <span class="kd">extends</span> <span class="n">Request</span><span class="o">,</span> <span class="n">ResultT</span><span class="o">&gt;</span> <span class="n">ResultT</span> <span class="nf">execute</span><span class="o">(</span>
      <span class="n">RequestT</span> <span class="n">request</span><span class="o">,</span> <span class="n">GenericType</span><span class="o">&lt;</span><span class="n">ResultT</span><span class="o">&gt;</span> <span class="n">resultType</span><span class="o">);</span>
</pre></div>
</div>
<p>It takes a request, and a type token that serves as a hint at the expected result. Each <code class="docutils literal notranslate"><span class="pre">(RequestT,</span> <span class="pre">ResultT)</span></code> combination defines an execution model, for example:</p>
<p>| <code class="docutils literal notranslate"><span class="pre">RequestT</span></code> | <code class="docutils literal notranslate"><span class="pre">ResultT</span></code> | Execution |
| — | — | —|
| <code class="docutils literal notranslate"><span class="pre">Statement</span></code> | <code class="docutils literal notranslate"><span class="pre">ResultSet</span></code> | CQL, synchronous |
| <code class="docutils literal notranslate"><span class="pre">Statement</span></code> | <code class="docutils literal notranslate"><span class="pre">CompletionStage&lt;AsyncResultSet&gt;</span></code> | CQL, asynchronous |
| <code class="docutils literal notranslate"><span class="pre">Statement</span></code> | <code class="docutils literal notranslate"><span class="pre">ReactiveResultSet</span></code> | CQL, reactive |
| <code class="docutils literal notranslate"><span class="pre">GraphStatement</span></code> | <code class="docutils literal notranslate"><span class="pre">GraphResultSet</span></code> | DSE Graph, synchronous |
| <code class="docutils literal notranslate"><span class="pre">GraphStatement</span></code> | <code class="docutils literal notranslate"><span class="pre">CompletionStage&lt;AsyncGraphResultSet&gt;</span></code> | DSE Graph, asynchronous |</p>
<p>In general, regular client code doesn’t use <code class="docutils literal notranslate"><span class="pre">Session.execute</span></code> directly. Instead, child interfaces
expose more user-friendly shortcuts for a given result type:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CqlSession</span> <span class="kd">extends</span> <span class="n">Session</span> <span class="o">{</span>
  <span class="k">default</span> <span class="n">ResultSet</span> <span class="nf">execute</span><span class="o">(</span><span class="n">Statement</span><span class="o">&lt;?&gt;</span> <span class="n">statement</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">execute</span><span class="o">(</span><span class="n">statement</span><span class="o">,</span> <span class="n">Statement</span><span class="o">.</span><span class="na">SYNC</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The logic for each execution model is encapsulated in a <code class="docutils literal notranslate"><span class="pre">RequestProcessor&lt;RequestT,</span> <span class="pre">ResultT&gt;</span></code>.
Processors are stored in a <code class="docutils literal notranslate"><span class="pre">RequestProcessorRegistry</span></code>. For each request, the session invokes the
registry to find the processor that matches the request and result types.</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>+----------------+  <span class="m">1</span>+-----------------------------------+
<span class="p">|</span> DefaultSession +---+ RequestProcessorRegistry          <span class="p">|</span>
+----------------+   +-----------------------------------+
                     <span class="p">|</span> processorFor<span class="o">(</span>                     <span class="p">|</span>
                     <span class="p">|</span>   RequestT, GenericType<span class="o">[</span>ResultT<span class="o">])</span> <span class="p">|</span>
                     +-----------------+-----------------+
                                       <span class="p">|</span>
                                       <span class="p">|</span>n
                +----------------------+----------------------+
                <span class="p">|</span> RequestProcessor<span class="o">[</span>RequestT, ResultT<span class="o">]</span>         <span class="p">|</span>
                +---------------------------------------------+
                <span class="p">|</span> boolean canProcess<span class="o">(</span>Request, GenericType<span class="o">[</span>?<span class="o">])</span> <span class="p">|</span>
                <span class="p">|</span> ResultT process<span class="o">(</span>RequestT<span class="o">)</span>                   <span class="p">|</span>
                +---------------------------------------------+
                        ^
                        <span class="p">|</span>         +--------------------------+
                        +---------+ CqlRequestSyncProcessor  <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        +---------+ CqlRequestAsyncProcessor <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        +---------+ CqlPrepareSyncProcessor  <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        <span class="p">|</span>
                        <span class="p">|</span>         +--------------------------+
                        +---------+ CqlPrepareAsyncProcessor <span class="p">|</span>
                                  +--------------------------+
</pre></div>
</div>
<p>A processor is responsible for:</p>
<ul class="simple">
<li><p>converting the user request into <a class="reference external" href="../native_protocol/">protocol-level messages</a>;</p></li>
<li><p>selecting a coordinator node, and obtaining a channel from its connection pool;</p></li>
<li><p>writing the request to the channel;</p></li>
<li><p>handling timeouts, retries and speculative executions;</p></li>
<li><p>translating the response into user-level types.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> interface makes very few assumptions about the actual processing; but in
general, implementations create a handler for the lifecycle of every request. For example,
<code class="docutils literal notranslate"><span class="pre">CqlRequestHandler</span></code> is the central component for basic CQL execution.</p>
<p>Processors can be implemented in terms of other processors. In particular, this is the case for
synchronous execution models, which are just a blocking wrapper around their asynchronous
counterpart. You can observe this in <code class="docutils literal notranslate"><span class="pre">CqlRequestSyncProcessor</span></code>.</p>
<p>Note that preparing a statement is treated as just another execution model. It has its own
processors, that operate on a special <code class="docutils literal notranslate"><span class="pre">PrepareRequest</span></code> type:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CqlSession</span> <span class="kd">extends</span> <span class="n">Session</span> <span class="o">{</span>
  <span class="k">default</span> <span class="n">PreparedStatement</span> <span class="nf">prepare</span><span class="o">(</span><span class="n">SimpleStatement</span> <span class="n">statement</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultPrepareRequest</span><span class="o">(</span><span class="n">statement</span><span class="o">),</span> <span class="n">PrepareRequest</span><span class="o">.</span><span class="na">SYNC</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="extension-points">
<h2>Extension points<a class="headerlink" href="#extension-points" title="Permalink to this headline">¶</a></h2>
<section id="requestprocessorregistry">
<h3>RequestProcessorRegistry<a class="headerlink" href="#requestprocessorregistry" title="Permalink to this headline">¶</a></h3>
<p>You can customize the set of request processors by <a class="reference external" href="../common/context/#overriding-a-context-component">extending the
context</a> and overriding
<code class="docutils literal notranslate"><span class="pre">buildRequestProcessorRegistry</span></code>.</p>
<p>This can be used to either:</p>
<ul class="simple">
<li><p>add your own execution models (new request types and/or return types);</p></li>
<li><p>remove existing ones;</p></li>
<li><p>or a combination of both.</p></li>
</ul>
<p>The driver codebase contains an integration test that provides a complete example:
<a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/core/session/RequestProcessorIT.java">RequestProcessorIT</a>. It shows how you can build a session that returns Guava’s <code class="docutils literal notranslate"><span class="pre">ListenableFuture</span></code>
instead of Java’s <code class="docutils literal notranslate"><span class="pre">CompletionStage</span></code> (existing request type, different return type).</p>
<p><a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/example/guava/internal/GuavaDriverContext.java">GuavaDriverContext</a> is the custom context subclass. It plugs a custom registry that wraps the
default async processors with <a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/example/guava/internal/GuavaRequestAsyncProcessor.java">GuavaRequestAsyncProcessor</a>, to transform the returned futures.</p>
<p>Note that the default async processors are not present in the registry anymore; if you try to call
a method that returns a <code class="docutils literal notranslate"><span class="pre">CompletionStage</span></code>, it fails. See the next section for how to hide those
methods.</p>
</section>
<section id="exposing-a-custom-session-interface">
<h3>Exposing a custom session interface<a class="headerlink" href="#exposing-a-custom-session-interface" title="Permalink to this headline">¶</a></h3>
<p>If you add or remove execution models, you probably want to expose a session interface that matches
the underlying capabilities of the implementation.</p>
<p>For example, in the <a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/core/session/RequestProcessorIT.java">RequestProcessorIT</a> example mentioned in the previous section, we remove the
ability to return <code class="docutils literal notranslate"><span class="pre">CompletionStage</span></code>, but add the ability to return <code class="docutils literal notranslate"><span class="pre">ListenableFuture</span></code>. Therefore we
expose a custom <a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/example/guava/api/GuavaSession.java">GuavaSession</a> with a different return type for async methods:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuavaSession</span> <span class="kd">extends</span> <span class="n">Session</span> <span class="o">{</span>
  <span class="k">default</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">AsyncResultSet</span><span class="o">&gt;</span> <span class="nf">executeAsync</span><span class="o">(</span><span class="n">Statement</span><span class="o">&lt;?&gt;</span> <span class="n">statement</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
  <span class="k">default</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">PreparedStatement</span><span class="o">&gt;</span> <span class="nf">prepareAsync</span><span class="o">(</span><span class="n">SimpleStatement</span> <span class="n">statement</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>We need an implementation of this interface. Our new methods all have default implementations in
term of the abstract <code class="docutils literal notranslate"><span class="pre">Session.execute()</span></code>, so the only thing we need is to delegate to an existing
<code class="docutils literal notranslate"><span class="pre">Session</span></code>. The driver provides <code class="docutils literal notranslate"><span class="pre">SessionWrapper</span></code> to that effect. See <a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/example/guava/internal/DefaultGuavaSession.java">DefaultGuavaSession</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultGuavaSession</span> <span class="kd">extends</span> <span class="n">SessionWrapper</span> <span class="kd">implements</span> <span class="n">GuavaSession</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">DefaultGuavaSession</span><span class="o">(</span><span class="n">Session</span> <span class="n">delegate</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">delegate</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Finally, we want to create an instance of this wrapper. Since we extended the context (see previous
section), we already wrote a custom builder subclass; there is another protected method we can
override to plug our wrapper. See <a class="reference external" href="https://github.com/datastax/java-driver/blob/4.x/integration-tests/src/test/java/com/datastax/oss/driver/example/guava/api/GuavaSessionBuilder.java">GuavaSessionBuilder</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuavaSessionBuilder</span> <span class="kd">extends</span> <span class="n">SessionBuilder</span><span class="o">&lt;</span><span class="n">GuavaSessionBuilder</span><span class="o">,</span> <span class="n">GuavaSession</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">DriverContext</span> <span class="nf">buildContext</span><span class="o">(</span> <span class="o">...</span> <span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">GuavaSession</span> <span class="nf">wrap</span><span class="o">(</span><span class="n">CqlSession</span> <span class="n">defaultSession</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">DefaultGuavaSession</span><span class="o">(</span><span class="n">defaultSession</span><span class="o">);</span>
  <span class="o">}</span>
</pre></div>
</div>
<p>Client code can now use the familiar pattern to create a session:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">GuavaSession</span> <span class="n">session</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GuavaSessionBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">addContactEndPoints</span><span class="o">(...)</span>
    <span class="o">.</span><span class="na">withKeyspace</span><span class="o">(</span><span class="s">&quot;test&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
</section>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../netty_pipeline/index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Netty pipeline
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../../mapper/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Mapper
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.13.0.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.12.0.x/index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.11.1.x/index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.10.0.x/index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../core/index.html">Core driver</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../core/address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../core/configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../core/configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../core/control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/graalvm/index.html">Using the driver in GraalVM native images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/logging/index.html">Logging</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../core/metadata/index.html">Metadata</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../core/metadata/node/index.html">Node metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/metadata/schema/index.html">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/metadata/token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../core/metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/paging/index.html">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/ssl/index.html">SSL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../core/statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../core/statements/batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/statements/per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/statements/simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../core/temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Developer docs</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mapper/index.html">Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../mapper/config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../mapper/daos/index.html">DAOs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/custom_types/index.html">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../mapper/entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mapper/mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../query_builder/index.html">Query builder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../query_builder/schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Request execution&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.13.0.x/manual/developer/request_execution/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.13.0.x/docs/source/manual/developer/request_execution/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Request execution</a><ul>
<li><a class="reference internal" href="#connection-pooling">Connection pooling</a><ul>
<li><a class="reference internal" href="#fixed-size">Fixed size</a></li>
<li><a class="reference internal" href="#no-queuing">No queuing</a></li>
<li><a class="reference internal" href="#built-in-reconnection">Built-in reconnection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#request-processors">Request processors</a></li>
<li><a class="reference internal" href="#extension-points">Extension points</a><ul>
<li><a class="reference internal" href="#requestprocessorregistry">RequestProcessorRegistry</a></li>
<li><a class="reference internal" href="#exposing-a-custom-session-interface">Exposing a custom session interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>