<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_332) on Wed May 25 14:48:55 UTC 2022 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>OffsetPager (Java driver for Scylla and Apache Cassandra(R) - core 4.12.0.1-SNAPSHOT API)</title>
<meta name="date" content="2022-05-25">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OffsetPager (Java driver for Scylla and Apache Cassandra(R) - core 4.12.0.1-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OffsetPager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/datastax/oss/driver/api/core/paging/OffsetPager.html" target="_top">Frames</a></li>
<li><a href="OffsetPager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.datastax.oss.driver.api.core.paging</div>
<h2 title="Class OffsetPager" class="title">Class OffsetPager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.datastax.oss.driver.api.core.paging.OffsetPager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@ThreadSafe
public class <span class="typeNameLabel">OffsetPager</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A utility to emulate offset queries on the client side (<b>this comes with important performance
 trade-offs, make sure you read and understand the whole javadocs before using this class</b>).

 <p>Web UIs and services often provide paginated results with random access, for example: given a
 page size of 20 elements, fetch page 5. Cassandra does not support this natively (see <a
 href="https://issues.apache.org/jira/browse/CASSANDRA-6511">CASSANDRA-6511</a>), because such
 queries are inherently linear: the database would have to restart from the beginning every time,
 and skip unwanted rows until it reaches the desired offset.

 <p>However, random pagination is a real need for many applications, and linear performance can be
 a reasonable trade-off if the cardinality stays low. This class provides a way to emulate this
 behavior on the client side.

 <h3>Performance considerations</h3>

 For each page that you want to retrieve:

 <ul>
   <li>you need to re-execute the query, in order to start with a fresh result set;
   <li>this class starts iterating from the beginning, and skips rows until it reaches the desired
       offset.
 </ul>

 <br>

 <pre>
 String query = "SELECT ...";
 OffsetPager pager = new OffsetPager(20);

 // Get page 2: start from a fresh result set, throw away rows 1-20, then return rows 21-40
 ResultSet rs = session.execute(query);
 OffsetPager.Page&lt;Row&gt; page2 = pager.getPage(rs, 2);

 // Get page 5: start from a fresh result set, throw away rows 1-80, then return rows 81-100
 rs = session.execute(query);
 OffsetPager.Page&lt;Row&gt; page5 = pager.getPage(rs, 5);
 </pre>

 <h3>Establishing application-level guardrails</h3>

 Linear performance should be fine for the values typically encountered in real-world
 applications: for example, if the page size is 25 and users never go past page 10, the worst case
 is only 250 rows, which is a very small result set. However, we strongly recommend that you
 implement hard limits in your application code: if the page number is exposed to the user (for
 example if it is passed as a URL parameter), make sure it is properly validated and enforce a
 maximum, so that an attacker can't inject a large value that could potentially fetch millions of
 rows.

 <h3>Relation with protocol-level paging</h3>

 Protocol-level paging refers to the ability to split large response into multiple network chunks:
 see <a href="../../../../../../../com/datastax/oss/driver/api/core/cql/Statement.html#setPageSize-int-"><code>Statement.setPageSize(int)</code></a> and <code>basic.request.page-size</code> in the configuration.
 It happens under the hood, and is completely transparent for offset paging: this class will work
 the same no matter how many network roundtrips were needed to fetch the result. You don't need to
 set the protocol page size and the logical page size to the same value.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging">OffsetPager.Page</a>&lt;<a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="type parameter in OffsetPager.Page">ElementT</a>&gt;</span></code>
<div class="block">A page returned as the result of an offset query.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.html#OffsetPager-int-">OffsetPager</a></span>(int&nbsp;pageSize)</code>
<div class="block">Creates a new instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;ElementT,IterableT extends <a href="../../../../../../../com/datastax/oss/driver/api/core/AsyncPagingIterable.html" title="interface in com.datastax.oss.driver.api.core">AsyncPagingIterable</a>&lt;ElementT,IterableT&gt;&gt;<br><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent">CompletionStage</a>&lt;<a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging">OffsetPager.Page</a>&lt;ElementT&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.html#getPage-IterableT-int-">getPage</a></span>(IterableT&nbsp;iterable,
       int&nbsp;targetPageNumber)</code>
<div class="block">Extracts a page from an asynchronous result set, by skipping rows until we get to the requested
 offset.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;ElementT&gt;&nbsp;<a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging">OffsetPager.Page</a>&lt;ElementT&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.html#getPage-com.datastax.oss.driver.api.core.PagingIterable-int-">getPage</a></span>(<a href="../../../../../../../com/datastax/oss/driver/api/core/PagingIterable.html" title="interface in com.datastax.oss.driver.api.core">PagingIterable</a>&lt;ElementT&gt;&nbsp;iterable,
       int&nbsp;targetPageNumber)</code>
<div class="block">Extracts a page from a synchronous result set, by skipping rows until we get to the requested
 offset.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OffsetPager-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OffsetPager</h4>
<pre>public&nbsp;OffsetPager(int&nbsp;pageSize)</pre>
<div class="block">Creates a new instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pageSize</code> - the number of elements per page. Must be greater than or equal to 1.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPage-com.datastax.oss.driver.api.core.PagingIterable-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPage</h4>
<pre>@NonNull
public&nbsp;&lt;ElementT&gt;&nbsp;<a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging">OffsetPager.Page</a>&lt;ElementT&gt;&nbsp;getPage(@NonNull
                                                              <a href="../../../../../../../com/datastax/oss/driver/api/core/PagingIterable.html" title="interface in com.datastax.oss.driver.api.core">PagingIterable</a>&lt;ElementT&gt;&nbsp;iterable,
                                                              int&nbsp;targetPageNumber)</pre>
<div class="block">Extracts a page from a synchronous result set, by skipping rows until we get to the requested
 offset.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iterable</code> - the iterable to extract the results from: typically a <a href="../../../../../../../com/datastax/oss/driver/api/core/cql/ResultSet.html" title="interface in com.datastax.oss.driver.api.core.cql"><code>ResultSet</code></a>, or a
     <a href="../../../../../../../com/datastax/oss/driver/api/core/PagingIterable.html" title="interface in com.datastax.oss.driver.api.core"><code>PagingIterable</code></a> returned by the mapper.</dd>
<dd><code>targetPageNumber</code> - the page to return (1 for the first page, 2 for the second page, etc).
     Must be greater than or equal to 1.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the requested page, or the last page if the requested page was past the end of the
     iterable.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the conditions on the arguments are not respected.</dd>
</dl>
</li>
</ul>
<a name="getPage-com.datastax.oss.driver.api.core.AsyncPagingIterable-int-">
<!--   -->
</a><a name="getPage-IterableT-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPage</h4>
<pre>@NonNull
public&nbsp;&lt;ElementT,IterableT extends <a href="../../../../../../../com/datastax/oss/driver/api/core/AsyncPagingIterable.html" title="interface in com.datastax.oss.driver.api.core">AsyncPagingIterable</a>&lt;ElementT,IterableT&gt;&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent">CompletionStage</a>&lt;<a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging">OffsetPager.Page</a>&lt;ElementT&gt;&gt;&nbsp;getPage(@NonNull
                                                                                                                                         IterableT&nbsp;iterable,
                                                                                                                                         int&nbsp;targetPageNumber)</pre>
<div class="block">Extracts a page from an asynchronous result set, by skipping rows until we get to the requested
 offset.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iterable</code> - the iterable to extract the results from. Typically an <a href="../../../../../../../com/datastax/oss/driver/api/core/AsyncPagingIterable.html" title="interface in com.datastax.oss.driver.api.core"><code>AsyncPagingIterable</code></a>, or a <a href="../../../../../../../com/datastax/oss/driver/api/core/MappedAsyncPagingIterable.html" title="interface in com.datastax.oss.driver.api.core"><code>MappedAsyncPagingIterable</code></a> returned by the mapper.</dd>
<dd><code>targetPageNumber</code> - the page to return (1 for the first page, 2 for the second page, etc).
     Must be greater than or equal to 1.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a stage that will complete with the requested page, or the last page if the requested
     page was past the end of the iterable.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the conditions on the arguments are not respected.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OffsetPager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../com/datastax/oss/driver/api/core/paging/OffsetPager.Page.html" title="interface in com.datastax.oss.driver.api.core.paging"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?com/datastax/oss/driver/api/core/paging/OffsetPager.html" target="_top">Frames</a></li>
<li><a href="OffsetPager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017&#x2013;2022. All rights reserved.</small></p>
</body>
</html>
