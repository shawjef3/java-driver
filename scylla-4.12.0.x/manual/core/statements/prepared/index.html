

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Prepared statements | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/core/statements/prepared/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../../"
            src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Java Driver.
            
            <a href="../../../../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../../index.html">
                Manual
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../../index.html">
                Core driver
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Statements
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Prepared statements</span>
</div>
                    </div>
                
                <section id="prepared-statements">
<h1>Prepared statements<a class="headerlink" href="#prepared-statements" title="Permalink to this headline">¶</a></h1>
<section id="quick-overview">
<h2>Quick overview<a class="headerlink" href="#quick-overview" title="Permalink to this headline">¶</a></h2>
<p>Prepare a query string once, reuse with different values. More efficient than simple statements for
queries that are used often.</p>
<ul class="simple">
<li><p>create the prepared statement with <code class="docutils literal notranslate"><span class="pre">session.prepare()</span></code>, call <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.12.0.x/api/com/datastax/oss/driver/api/core/cql/PreparedStatement.html#bind-java.lang.Object...-">bind()</a> or
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.12.0.x/api/com/datastax/oss/driver/api/core/cql/PreparedStatement.html#boundStatementBuilder-java.lang.Object...-">boundStatementBuilder()</a> on it to create executable
statements.</p></li>
<li><p>the session has a built-in cache, it’s OK to prepare the same string twice.</p></li>
<li><p>values: <code class="docutils literal notranslate"><span class="pre">?</span></code> or <code class="docutils literal notranslate"><span class="pre">:name</span></code>, fill with <code class="docutils literal notranslate"><span class="pre">setXxx(int,</span> <span class="pre">...)</span></code> or <code class="docutils literal notranslate"><span class="pre">setXxx(String,</span> <span class="pre">...)</span></code> respectively.</p></li>
<li><p>some values can be left unset with Cassandra 2.2+ / DSE 5+.</p></li>
<li><p>built-in implementation is <strong>immutable</strong>. Setters always return a new object, don’t ignore the
result.</p></li>
</ul>
<hr class="docutils" />
<p>Use prepared statements for queries that are executed multiple times in your application:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PreparedStatement</span> <span class="n">prepared</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span>
  <span class="s">&quot;insert into product (sku, description) values (?, ?)&quot;</span><span class="o">);</span>

<span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">prepared</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="s">&quot;234827&quot;</span><span class="o">,</span> <span class="s">&quot;Mouse&quot;</span><span class="o">);</span>
<span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">bound</span><span class="o">);</span>
</pre></div>
</div>
<p>When you prepare the statement, Cassandra parses the query string, caches the result and returns a
unique identifier (the <code class="docutils literal notranslate"><span class="pre">PreparedStatement</span></code> object keeps an internal reference to that identifier):</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client                   driver           Cassandra
--+------------------------+----------------+------
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span> session.prepare<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>-----------------------&gt;<span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span> PREPARE<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>---------------&gt;<span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span> - compute id
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span> - parse query string
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span> - cache <span class="o">(</span>id, parsed<span class="o">)</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span> PREPARED<span class="o">(</span>id<span class="o">)</span>   <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>&lt;---------------<span class="p">|</span>
  <span class="p">|</span>  PreparedStatement<span class="o">(</span>id<span class="o">)</span> <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>&lt;-----------------------<span class="p">|</span>                <span class="p">|</span>
</pre></div>
</div>
<p>When you bind and execute a prepared statement, the driver only sends the identifier, which allows
Cassandra to skip the parsing phase:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client                            driver                Cassandra
--+---------------------------------+---------------------+------
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span> session.execute<span class="o">(</span>BoundStatement<span class="o">)</span> <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>--------------------------------&gt;<span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span> EXECUTE<span class="o">(</span>id, values<span class="o">)</span> <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>--------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span> - get cache<span class="o">(</span>id<span class="o">)</span>
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span> - execute query
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>          ROWS       <span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>&lt;--------------------<span class="p">|</span>
  <span class="p">|</span>                                 <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>&lt;--------------------------------<span class="p">|</span>                     <span class="p">|</span>
</pre></div>
</div>
</section>
<section id="advantages-of-prepared-statements">
<h2>Advantages of prepared statements<a class="headerlink" href="#advantages-of-prepared-statements" title="Permalink to this headline">¶</a></h2>
<p>Beyond saving a bit of parsing overhead on the server, prepared statements have other advantages;
the <code class="docutils literal notranslate"><span class="pre">PREPARED</span></code> response also contains useful metadata about the CQL query:</p>
<ul class="simple">
<li><p>information about the result set that will be produced when the statement gets executed. The
driver caches this, so that the server doesn’t need to include it with every response. This saves
a bit of bandwidth, and the resources it would take to decode it every time.</p></li>
<li><p>the CQL types of the bound variables. This allows bound statements’ <code class="docutils literal notranslate"><span class="pre">set</span></code> methods to perform
better checks, and fail fast (without a server round-trip) if the types are wrong.</p></li>
<li><p>which bound variables are part of the partition key. This allows bound statements to automatically
compute their <a class="reference external" href="../../load_balancing/#token-aware">routing key</a>.</p></li>
<li><p>more optimizations might get added in the future. For example, <a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-10813">CASSANDRA-10813</a> suggests adding
an “<a class="reference external" href="../../idempotence">idempotent</a>” flag to the response.</p></li>
</ul>
<p>If you have a unique query that is executed only once, a <a class="reference external" href="../simple/">simple statement</a> will be more
efficient. But note that this should be pretty rare: most client applications typically repeat the
same queries over and over, and a parameterized version can be extracted and prepared.</p>
</section>
<section id="preparing">
<h2>Preparing<a class="headerlink" href="#preparing" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Session.prepare()</span></code> accepts either a plain query string, or a <code class="docutils literal notranslate"><span class="pre">SimpleStatement</span></code> object. If you use a
<code class="docutils literal notranslate"><span class="pre">SimpleStatement</span></code>, its execution parameters will propagate to bound statements:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">SimpleStatement</span> <span class="n">simpleStatement</span> <span class="o">=</span>
    <span class="n">SimpleStatement</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="s">&quot;SELECT * FROM product WHERE sku = ?&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">setConsistencyLevel</span><span class="o">(</span><span class="n">DefaultConsistencyLevel</span><span class="o">.</span><span class="na">QUORUM</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">PreparedStatement</span> <span class="n">preparedStatement</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="n">simpleStatement</span><span class="o">);</span>
<span class="n">BoundStatement</span> <span class="n">boundStatement</span> <span class="o">=</span> <span class="n">preparedStatement</span><span class="o">.</span><span class="na">bind</span><span class="o">();</span>
<span class="k">assert</span> <span class="n">boundStatement</span><span class="o">.</span><span class="na">getConsistencyLevel</span><span class="o">()</span> <span class="o">==</span> <span class="n">DefaultConsistencyLevel</span><span class="o">.</span><span class="na">QUORUM</span><span class="o">;</span>
</pre></div>
</div>
<p>For more details, including the complete list of attributes that are copied, refer to
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.12.0.x/api/com/datastax/oss/driver/api/core/CqlSession.html#prepare-com.datastax.oss.driver.api.core.cql.SimpleStatement-">API docs</a>.</p>
<p>The driver caches prepared statements: if you call <code class="docutils literal notranslate"><span class="pre">prepare()</span></code> multiple times with the same query
string (or a <code class="docutils literal notranslate"><span class="pre">SimpleStatement</span></code> with the same execution parameters), you will get the same
<code class="docutils literal notranslate"><span class="pre">PreparedStatement</span></code> instance:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PreparedStatement</span> <span class="n">ps1</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="s">&quot;SELECT * FROM product WHERE sku = ?&quot;</span><span class="o">);</span>
<span class="c1">// The second call hits the cache, nothing is sent to the server:</span>
<span class="n">PreparedStatement</span> <span class="n">ps2</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="s">&quot;SELECT * FROM product WHERE sku = ?&quot;</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">ps1</span> <span class="o">==</span> <span class="n">ps2</span><span class="o">;</span>
</pre></div>
</div>
<p>We still recommend avoiding repeated calls to <code class="docutils literal notranslate"><span class="pre">prepare()</span></code>; if that’s not possible (e.g. if query
strings are generated dynamically), there will just be a small performance overhead to check the
cache on every call.</p>
<p>Note that caching is based on:</p>
<ul class="simple">
<li><p>the query string exactly as you provided it: the driver does not perform any kind of trimming or
sanitizing.</p></li>
<li><p>all other execution parameters: for example, preparing two statements with identical query strings
but different consistency levels will yield two distinct prepared statements (that each produce
bound statements with their respective consistency level).</p></li>
</ul>
<p>The size of the cache is exposed as a session-level <a class="reference external" href="../../metrics/">metric</a>
<code class="docutils literal notranslate"><span class="pre">cql-prepared-cache-size</span></code>. The cache uses [weak values](<a class="reference external" href="https://github.com/google/guava/wiki/CachesExplained#reference-based-eviction">guava eviction</a>) eviction, so this
represents the number of <code class="docutils literal notranslate"><span class="pre">PreparedStatement</span></code> instances that your application has created, and is
still holding a reference to.</p>
</section>
<section id="parameters-and-binding">
<h2>Parameters and binding<a class="headerlink" href="#parameters-and-binding" title="Permalink to this headline">¶</a></h2>
<p>The prepared query string will usually contain placeholders, which can be either anonymous or named:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ps1</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="s">&quot;insert into product (sku, description) values (?, ?)&quot;</span><span class="o">);</span>
<span class="n">ps2</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="s">&quot;insert into product (sku, description) values (:s, :d)&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>To turn the statement into its executable form, you need to <em>bind</em> it in order to create a
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.12.0.x/api/com/datastax/oss/driver/api/core/cql/BoundStatement.html">BoundStatement</a>. As shown previously, there is a shorthand to provide the parameters in the same
call:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">ps1</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="s">&quot;324378&quot;</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>You can also bind first, then use setters, which is slightly more explicit. Bound statements are
<strong>immutable</strong>, so each method returns a new instance; make sure you don’t accidentally discard the
result:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Positional setters:</span>
<span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">ps1</span><span class="o">.</span><span class="na">bind</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;324378&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">);</span>

<span class="c1">// Named setters:</span>
<span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">ps2</span><span class="o">.</span><span class="na">bind</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;s&quot;</span><span class="o">,</span> <span class="s">&quot;324378&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;d&quot;</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>Finally, you can use a builder to avoid creating intermediary instances, especially if you have a
lot of methods to call:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span>
  <span class="n">ps1</span>
      <span class="o">.</span><span class="na">boundStatementBuilder</span><span class="o">()</span>
      <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;324378&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setExecutionProfileName</span><span class="o">(</span><span class="s">&quot;oltp&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setQueryTimestamp</span><span class="o">(</span><span class="mi">123456789L</span><span class="o">)</span>
      <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>You can use named setters even if the query uses anonymous parameters; Cassandra names the
parameters after the column they apply to:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">ps1</span><span class="o">.</span><span class="na">bind</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;sku&quot;</span><span class="o">,</span> <span class="s">&quot;324378&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;description&quot;</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>This can be ambiguous if the query uses the same column multiple times, like in <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">sales</span> <span class="pre">where</span> <span class="pre">sku</span> <span class="pre">=</span> <span class="pre">?</span> <span class="pre">and</span> <span class="pre">date</span> <span class="pre">&gt;</span> <span class="pre">?</span> <span class="pre">and</span> <span class="pre">date</span> <span class="pre">&lt;</span> <span class="pre">?</span></code>. In these situations, use positional setters or named
parameters.</p>
<section id="unset-values">
<h3>Unset values<a class="headerlink" href="#unset-values" title="Permalink to this headline">¶</a></h3>
<p>With <a class="reference external" href="../../native_protocol/">native protocol</a> V3, all variables must be bound. With native protocol
V4 (Cassandra 2.2 / DSE 5) or above, variables can be left unset, in which case they will be ignored
(no tombstones will be generated). If you’re reusing a bound statement, you can use the <code class="docutils literal notranslate"><span class="pre">unset</span></code>
method to unset variables that were previously set:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BoundStatement</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">ps1</span><span class="o">.</span><span class="na">bind</span><span class="o">()</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;sku&quot;</span><span class="o">,</span> <span class="s">&quot;324378&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="s">&quot;description&quot;</span><span class="o">,</span> <span class="s">&quot;LCD screen&quot;</span><span class="o">);</span>

<span class="c1">// Named:</span>
<span class="n">bound</span> <span class="o">=</span> <span class="n">bound</span><span class="o">.</span><span class="na">unset</span><span class="o">(</span><span class="s">&quot;description&quot;</span><span class="o">);</span>

<span class="c1">// Positional:</span>
<span class="n">bound</span> <span class="o">=</span> <span class="n">bound</span><span class="o">.</span><span class="na">unset</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</pre></div>
</div>
<p>A bound statement also has getters to retrieve the values. Note that this has a small performance
overhead, since values are stored in their serialized form.</p>
<p>Since bound statements are immutable, they are safe to reuse across threads and asynchronous
executions.</p>
</section>
</section>
<section id="how-the-driver-prepares">
<h2>How the driver prepares<a class="headerlink" href="#how-the-driver-prepares" title="Permalink to this headline">¶</a></h2>
<p>Cassandra does not replicate prepared statements across the cluster. It is the driver’s
responsibility to ensure that each node’s cache is up to date. It uses a number of strategies to
achieve this:</p>
<ol>
<li><p>When a statement is initially prepared, it is first sent to a single node in the cluster (this
avoids hitting all nodes in case the query string is wrong). Once that node replies
successfully, the driver re-prepares on all remaining nodes:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client                   driver           node1          node2  node3
--+------------------------+----------------+--------------+------+---
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span> session.prepare<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>-----------------------&gt;<span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span> PREPARE<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>---------------&gt;<span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span> PREPARED<span class="o">(</span>id<span class="o">)</span>   <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>&lt;---------------<span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>           PREPARE<span class="o">(</span>query<span class="o">)</span>      <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>------------------------------&gt;<span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>           PREPARE<span class="o">(</span>query<span class="o">)</span>      <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>-------------------------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                        <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>&lt;-----------------------<span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
</pre></div>
</div>
<p>The prepared statement identifier is deterministic (it’s a hash of the query string), so it is
the same for all nodes.</p>
</li>
<li><p>if a node crashes, it might lose all of its prepared statements (this depends on the version:
since Cassandra 3.10, prepared statements are stored in a table, and the node is able to
reprepare on its own when it restarts). So the driver keeps a client-side cache; anytime a node
is marked back up, the driver re-prepares all statements on it;</p></li>
<li><p>finally, if the driver tries to execute a statement and finds out that the coordinator doesn’t
know about it, it will re-prepare the statement on the fly (this is transparent for the client,
but will cost two extra roundtrips):</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client                          driver                         node1
--+-------------------------------+------------------------------+--
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>session.execute<span class="o">(</span>boundStatement<span class="o">)</span><span class="p">|</span>                              <span class="p">|</span>
  +------------------------------&gt;<span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>     EXECUTE<span class="o">(</span>id, values<span class="o">)</span>      <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>-----------------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>         UNPREPARED           <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>&lt;-----------------------------<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>       PREPARE<span class="o">(</span>query<span class="o">)</span>         <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>-----------------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>        PREPARED<span class="o">(</span>id<span class="o">)</span>          <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>&lt;-----------------------------<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>     EXECUTE<span class="o">(</span>id, values<span class="o">)</span>      <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>-----------------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>             ROWS             <span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>&lt;-----------------------------<span class="p">|</span>
  <span class="p">|</span>                               <span class="p">|</span>                              <span class="p">|</span>
  <span class="p">|</span>&lt;------------------------------<span class="p">|</span>                              <span class="p">|</span>
</pre></div>
</div>
</li>
</ol>
<p>You can customize these strategies through the <a class="reference external" href="../../configuration/">configuration</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">datastax-java-driver.advanced.prepared-statements.prepare-on-all-nodes</span></code> controls whether
statements are initially re-prepared on other hosts (step 1 above);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datastax-java-driver.advanced.prepared-statements.reprepare-on-up</span></code> controls how statements are
re-prepared on a node that comes back up (step 2 above).</p></li>
</ul>
<p>Read the <a class="reference external" href="../../configuration/reference/">reference configuration</a> for a detailed description of each
of those options.</p>
</section>
<section id="prepared-statements-and-schema-changes">
<h2>Prepared statements and schema changes<a class="headerlink" href="#prepared-statements-and-schema-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>With Cassandra 3 and below, avoid preparing <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code> queries</strong>; the driver does not handle
schema changes that would affect the results of a prepared statement. Therefore <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code> queries
can create issues, for example:</p>
<ul class="simple">
<li><p>table <code class="docutils literal notranslate"><span class="pre">foo</span></code> contains columns <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p></li>
<li><p>the driver prepares <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">foo</span></code>. It gets a reply indicating that executing this statement
will return columns <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code>, and caches that metadata locally (for performance reasons: this
avoids sending it with each response later).</p></li>
<li><p>someone alters table <code class="docutils literal notranslate"><span class="pre">foo</span></code> to add a new column <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p></li>
<li><p>the next time the driver executes the prepared statement, it gets a response that now contains
columns <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code>. However, it’s still using its stale copy of the metadata, so it decodes
<code class="docutils literal notranslate"><span class="pre">a</span></code> thinking it’s <code class="docutils literal notranslate"><span class="pre">b</span></code>. In the best case scenario, <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> have different types and decoding
fails; in the worst case, they have compatible types and the client gets corrupt data.</p></li>
</ul>
<p>To avoid this, do not create prepared statements for <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code> queries if you plan on making schema
changes involving adding or dropping columns. Instead, always list all columns of interest in your
statement, i.e.: <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">b,</span> <span class="pre">c</span> <span class="pre">FROM</span> <span class="pre">foo</span></code>.</p>
<p>With Cassandra 4 and <a class="reference external" href="../../native_protocol/">native protocol</a> v5, this issue is fixed
(<a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-10786">CASSANDRA-10786</a>): the server detects that the driver is operating on stale metadata and sends the
new version with the response; the driver updates its local cache transparently, and the client can
observe the new columns in the result set.</p>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../per_query_keyspace/index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Per-query keyspace
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../simple/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Simple statements
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.12.0.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="../../../../../stable/index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.11.1.x/index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.10.0.x/index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">Core driver</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../logging/index.html">Logging</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../metadata/index.html">Metadata</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/node/index.html">Node metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/schema/index.html">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../paging/index.html">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ssl/index.html">SSL</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="../index.html">Statements</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../developer/index.html">Developer docs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../developer/common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/request_execution/index.html">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../mapper/index.html">Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../mapper/config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../mapper/daos/index.html">DAOs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/custom_types/index.html">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../mapper/entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mapper/mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../query_builder/index.html">Query builder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../query_builder/schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Prepared statements&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.12.0.x/manual/core/statements/prepared/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.12.0.x/docs/source/manual/core/statements/prepared/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Prepared statements</a><ul>
<li><a class="reference internal" href="#quick-overview">Quick overview</a></li>
<li><a class="reference internal" href="#advantages-of-prepared-statements">Advantages of prepared statements</a></li>
<li><a class="reference internal" href="#preparing">Preparing</a></li>
<li><a class="reference internal" href="#parameters-and-binding">Parameters and binding</a><ul>
<li><a class="reference internal" href="#unset-values">Unset values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-the-driver-prepares">How the driver prepares</a></li>
<li><a class="reference internal" href="#prepared-statements-and-schema-changes">Prepared statements and schema changes</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>