

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Schema metadata | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/core/metadata/schema/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../../"
            src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Java Driver.
            
            <a href="../../../../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../../index.html">
                Manual
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../../index.html">
                Core driver
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Metadata
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Schema metadata</span>
</div>
                    </div>
                
                <section id="schema-metadata">
<h1>Schema metadata<a class="headerlink" href="#schema-metadata" title="Permalink to this headline">¶</a></h1>
<section id="quick-overview">
<h2>Quick overview<a class="headerlink" href="#quick-overview" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/metadata/Metadata.html#getKeyspaces--">session.getMetadata().getKeyspaces()</a></p>
<ul class="simple">
<li><p>immutable (must invoke again to observe changes).</p></li>
<li><p>getting notifications:
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/session/SessionBuilder.html#withSchemaChangeListener-com.datastax.oss.driver.api.core.metadata.schema.SchemaChangeListener-">CqlSession.builder().withSchemaChangeListener</a>.</p></li>
<li><p>enabling/disabling: <code class="docutils literal notranslate"><span class="pre">advanced.metadata.schema.enabled</span></code> in the configuration, or
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/session/Session.html#setSchemaMetadataEnabled-java.lang.Boolean-">session.setSchemaMetadataEnabled()</a>.</p></li>
<li><p>filtering: <code class="docutils literal notranslate"><span class="pre">advanced.metadata.schema.refreshed-keyspaces</span></code> in the configuration.</p></li>
<li><p>schema agreement: wait for the schema to replicate to all nodes (may add latency to DDL
statements).</p></li>
</ul>
<hr class="docutils" />
<p><a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/metadata/Metadata.html#getKeyspaces--">Metadata#getKeyspaces</a> returns a client-side representation of the database schema:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">CqlIdentifier</span><span class="o">,</span> <span class="n">KeyspaceMetadata</span><span class="o">&gt;</span> <span class="n">keyspaces</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">getKeyspaces</span><span class="o">();</span>
<span class="n">KeyspaceMetadata</span> <span class="n">system</span> <span class="o">=</span> <span class="n">keyspaces</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">CqlIdentifier</span><span class="o">.</span><span class="na">fromCql</span><span class="o">(</span><span class="s">&quot;system&quot;</span><span class="o">));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;The system keyspace contains the following tables:&quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">TableMetadata</span> <span class="n">table</span> <span class="o">:</span> <span class="n">system</span><span class="o">.</span><span class="na">getTables</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span>
      <span class="s">&quot;  %s (%d columns)%n&quot;</span><span class="o">,</span> <span class="n">table</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">asCql</span><span class="o">(</span><span class="kc">true</span><span class="o">),</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumns</span><span class="o">().</span><span class="na">size</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Schema metadata is fully immutable (both the map and all the objects it contains). It represents a
snapshot of the database at the time of the last metadata refresh, and is consistent with the
<a class="reference external" href="../token/">token map</a> of its parent <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> object. Keep in mind that <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> is itself
immutable; if you need to get the latest schema, be sure to call
<code class="docutils literal notranslate"><span class="pre">session.getMetadata().getKeyspaces()</span></code> again (and not just <code class="docutils literal notranslate"><span class="pre">getKeyspaces()</span></code> on a stale <code class="docutils literal notranslate"><span class="pre">Metadata</span></code>
reference).</p>
</section>
<section id="dse">
<h2>DSE<a class="headerlink" href="#dse" title="Permalink to this headline">¶</a></h2>
<p>All schema metadata interfaces accessible through <code class="docutils literal notranslate"><span class="pre">Metadata.getKeyspaces()</span></code> have a DSE-specific
subtype in the package <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/dse/driver/api/core/metadata/schema/package-frame.html">com.datastax.dse.driver.api.core.metadata.schema</a>. The objects returned by
the DSE driver implement those types, so you can safely cast:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">(</span><span class="n">KeyspaceMetadata</span> <span class="n">keyspace</span> <span class="o">:</span> <span class="n">session</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">getKeyspaces</span><span class="o">().</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
  <span class="n">DseKeyspaceMetadata</span> <span class="n">dseKeyspace</span> <span class="o">=</span> <span class="o">(</span><span class="n">DseKeyspaceMetadata</span><span class="o">)</span> <span class="n">keyspace</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If you’re calling a method that returns an optional and want to keep the result wrapped, use this
pattern:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">DseFunctionMetadata</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span>
    <span class="n">session</span>
        <span class="o">.</span><span class="na">getMetadata</span><span class="o">()</span>
        <span class="o">.</span><span class="na">getKeyspace</span><span class="o">(</span><span class="s">&quot;ks&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">ks</span> <span class="o">-&gt;</span> <span class="n">ks</span><span class="o">.</span><span class="na">getFunction</span><span class="o">(</span><span class="s">&quot;f&quot;</span><span class="o">))</span>
        <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">DseFunctionMetadata</span><span class="o">.</span><span class="na">class</span><span class="o">::</span><span class="n">cast</span><span class="o">);</span>
</pre></div>
</div>
<p>For future extensibility, there is a <code class="docutils literal notranslate"><span class="pre">DseXxxMetadata</span></code> subtype for every OSS type. But currently (DSE
6.7), the only types that really add extra information are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/dse/driver/api/core/metadata/schema/DseFunctionMetadata.html">DseFunctionMetadata</a>: add support for the <code class="docutils literal notranslate"><span class="pre">DETERMINISTIC</span></code> and <code class="docutils literal notranslate"><span class="pre">MONOTONIC</span></code> keywords;</p></li>
<li><p><a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/dse/driver/api/core/metadata/schema/DseAggregateMetadata.html">DseAggregateMetadata</a>: add support for the <code class="docutils literal notranslate"><span class="pre">MONOTONIC</span></code> keyword.</p></li>
</ul>
<p>All other types (keyspaces, tables, etc.) are identical to their OSS counterparts.</p>
</section>
<section id="notifications">
<h2>Notifications<a class="headerlink" href="#notifications" title="Permalink to this headline">¶</a></h2>
<p>If you need to follow schema changes, you don’t need to poll the metadata manually; instead,
you can register a listener to get notified when changes occur:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">SchemaChangeListener</span> <span class="n">listener</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">SchemaChangeListenerBase</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTableCreated</span><span class="o">(</span><span class="n">TableMetadata</span> <span class="n">table</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;New table: &quot;</span> <span class="o">+</span> <span class="n">table</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">asCql</span><span class="o">(</span><span class="kc">true</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">};</span>
<span class="n">CqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">CqlSession</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">withSchemaChangeListener</span><span class="o">(</span><span class="n">listener</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;CREATE TABLE test.foo (k int PRIMARY KEY)&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/metadata/schema/SchemaChangeListener.html">SchemaChangeListener</a> for the list of available methods. <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/metadata/schema/SchemaChangeListenerBase.html">SchemaChangeListenerBase</a> is a
convenience implementation with empty methods, for when you only need to override a few of them.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<section id="enabling-disabling">
<h3>Enabling/disabling<a class="headerlink" href="#enabling-disabling" title="Permalink to this headline">¶</a></h3>
<p>You can disable schema metadata globally from the configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datastax</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">driver</span><span class="o">.</span><span class="n">advanced</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<p>If it is disabled at startup, <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/metadata/Metadata.html#getKeyspaces--">Metadata#getKeyspaces</a> will stay empty. If you disable it at runtime,
it will keep the value of the last refresh.</p>
<p>You can achieve the same thing programmatically with <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/session/Session.html#setSchemaMetadataEnabled-java.lang.Boolean-">Session#setSchemaMetadataEnabled</a>: if you call
it with <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>, it overrides the configuration; if you pass <code class="docutils literal notranslate"><span class="pre">null</span></code>, it reverts to the
value defined in the configuration. One case where that could come in handy is if you are sending a
large number of DDL statements from your code:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Disable temporarily, we&#39;ll do a single refresh once we&#39;re done </span>
<span class="n">session</span><span class="o">.</span><span class="na">setSchemaMetadataEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
  <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;CREATE TABLE test.foo%d (k int PRIMARY KEY)&quot;</span><span class="o">,</span> <span class="n">i</span><span class="o">));</span>
<span class="o">}</span>

<span class="n">session</span><span class="o">.</span><span class="na">setSchemaMetadataEnabled</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</pre></div>
</div>
<p>Whenever schema metadata was disabled and becomes enabled again (either through the configuration or
the API), a refresh is triggered immediately.</p>
</section>
<section id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>You can also limit the metadata to a subset of keyspaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datastax</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">driver</span><span class="o">.</span><span class="n">advanced</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">refreshed</span><span class="o">-</span><span class="n">keyspaces</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="s2">&quot;products&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p>Each element in the list can be one of the following:</p>
<ol class="simple">
<li><p>An exact name inclusion, for example <code class="docutils literal notranslate"><span class="pre">&quot;Ks1&quot;</span></code>. If the name is case-sensitive, it must appear in
its exact case.</p></li>
<li><p>An exact name exclusion, for example <code class="docutils literal notranslate"><span class="pre">&quot;!Ks1&quot;</span></code>.</p></li>
<li><p>A regex inclusion, enclosed in slashes, for example <code class="docutils literal notranslate"><span class="pre">&quot;/^Ks.*/&quot;</span></code>. The part between the slashes
must follow the syntax rules of <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html">java.util.regex.Pattern</a>. The regex must match the entire
keyspace name (no partial matching).</p></li>
<li><p>A regex exclusion, for example <code class="docutils literal notranslate"><span class="pre">&quot;!/^Ks.*/&quot;</span></code>.</p></li>
</ol>
<p>If the list is empty, or the option is unset, all keyspaces will match. Otherwise:</p>
<ul class="simple">
<li><p>If a keyspace matches an exact name inclusion, it is always included, regardless of what any other
rule says.</p></li>
<li><p>Otherwise, if it matches an exact name exclusion, it is always excluded, regardless of what any
regex rule says.</p></li>
<li><p>Otherwise, if there are regex rules:</p>
<ul>
<li><p>if they’re only inclusions, the keyspace must match at least one of them.</p></li>
<li><p>if they’re only exclusions, the keyspace must match none of them.</p></li>
<li><p>if they’re both, the keyspace must match at least one inclusion and none of the
exclusions.</p></li>
</ul>
</li>
</ul>
<p>For example, given the keyspaces <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code>, <code class="docutils literal notranslate"><span class="pre">data1</span></code> and <code class="docutils literal notranslate"><span class="pre">data2</span></code>, here’s the outcome of
a few filters:</p>
<p>|Filter|Outcome|Translation|
|—|—|—|
| <code class="docutils literal notranslate"><span class="pre">[]</span></code> | <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code>, <code class="docutils literal notranslate"><span class="pre">data1</span></code>, <code class="docutils literal notranslate"><span class="pre">data2</span></code> | Include all. |
| <code class="docutils literal notranslate"><span class="pre">[&quot;ks1&quot;,</span> <span class="pre">&quot;ks2&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code> | Include ks1 and ks2 (recommended, see explanation below). |
| <code class="docutils literal notranslate"><span class="pre">[&quot;!system&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code>, <code class="docutils literal notranslate"><span class="pre">data1</span></code>, <code class="docutils literal notranslate"><span class="pre">data2</span></code> | Include all except system. |
| <code class="docutils literal notranslate"><span class="pre">[&quot;/^ks.*/&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code> | Include all that start with ks. |
| <code class="docutils literal notranslate"><span class="pre">[&quot;!/^ks.*/&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">data1</span></code>, <code class="docutils literal notranslate"><span class="pre">data2</span></code> | Exclude all that start with ks (and include everything else). |
| <code class="docutils literal notranslate"><span class="pre">[&quot;system&quot;,</span> <span class="pre">&quot;/^ks.*/&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">ks2</span></code> | Include system, and all that start with ks. |
| <code class="docutils literal notranslate"><span class="pre">[&quot;/^ks.*/&quot;,</span> <span class="pre">&quot;!ks2&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">ks1</span></code> | Include all that start with ks, except ks2. |
| <code class="docutils literal notranslate"><span class="pre">[&quot;!/^ks.*/&quot;,</span> <span class="pre">&quot;ks1&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">ks1</span></code>, <code class="docutils literal notranslate"><span class="pre">data1</span></code>, <code class="docutils literal notranslate"><span class="pre">data2</span></code> | Exclude all that start with ks, except ks1 (and also include everything else). |
| <code class="docutils literal notranslate"><span class="pre">[&quot;/^s.*/&quot;,</span> <span class="pre">/^ks.*/&quot;,</span> <span class="pre">&quot;!/.*2$/&quot;]</span></code> | <code class="docutils literal notranslate"><span class="pre">system</span></code>, <code class="docutils literal notranslate"><span class="pre">ks1</span></code> | Include all that start with s or ks, except if they end with 2. |</p>
<p>If an element is malformed, or if its regex has a syntax error, a warning is logged and that single
element is ignored.</p>
<p>The default configuration (see <a class="reference external" href="../../configuration/reference/">reference.conf</a>) excludes all
Cassandra and DSE system keyspaces.</p>
<p>Try to use only exact name inclusions if possible. This allows the driver to filter on the server
side with a <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">IN</span></code> clause. If you use any other rule, it has to fetch all system rows and filter
on the client side.</p>
<p>Note that, if you change the list at runtime, <code class="docutils literal notranslate"><span class="pre">onKeyspaceAdded</span></code>/<code class="docutils literal notranslate"><span class="pre">onKeyspaceDropped</span></code> will be invoked
on your schema listeners for the newly included/excluded keyspaces.</p>
</section>
<section id="schema-agreement">
<h3>Schema agreement<a class="headerlink" href="#schema-agreement" title="Permalink to this headline">¶</a></h3>
<p>Due to the distributed nature of Cassandra, schema changes made on one node might not be immediately
visible to others. If left unaddressed, this could create race conditions when successive queries
get routed to different coordinators:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span> Application             Driver             Node <span class="m">1</span>             Node <span class="m">2</span>
------+--------------------+------------------+------------------+---
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>  CREATE TABLE foo  <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>-------------------&gt;<span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>   send request   <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>-----------------&gt;<span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>     success      <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>&lt;-----------------<span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>   <span class="nb">complete</span> query   <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>&lt;-------------------<span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>  SELECT k FROM foo <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>-------------------&gt;<span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>   send request                      <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>------------------------------------&gt;<span class="p">|</span> schema changes not
      <span class="p">|</span>                    <span class="p">|</span>                                     <span class="p">|</span> replicated yet
      <span class="p">|</span>                    <span class="p">|</span>   unconfigured table foo            <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>&lt;------------------------------------<span class="p">|</span>
      <span class="p">|</span>   ERROR!           <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>&lt;-------------------<span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>                  <span class="p">|</span>
</pre></div>
</div>
<p>To avoid this issue, the driver waits until all nodes agree on a common schema version:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span> Application             Driver             Node <span class="m">1</span>
------+--------------------+------------------+-----
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>  CREATE TABLE...   <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>-------------------&gt;<span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>   send request   <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>-----------------&gt;<span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>     success      <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>&lt;-----------------<span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>          /--------------------<span class="se">\ </span>      <span class="p">|</span>
      <span class="p">|</span>          :Wait <span class="k">until</span> all nodes+------&gt;<span class="p">|</span>
      <span class="p">|</span>          :agree <span class="o">(</span>or timeout<span class="o">)</span>  :       <span class="p">|</span>
      <span class="p">|</span>          <span class="se">\-</span>-------------------/       <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>        ^         <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>        <span class="p">|</span>         <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>        +---------<span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>   <span class="nb">complete</span> query   <span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>&lt;-------------------<span class="p">|</span>                  <span class="p">|</span>
      <span class="p">|</span>                    <span class="p">|</span>                  <span class="p">|</span>
</pre></div>
</div>
<p>Schema agreement is checked:</p>
<ul class="simple">
<li><p>before a schema refresh;</p></li>
<li><p>before completing a successful schema-altering query (like in our example above).</p></li>
</ul>
<p>It is done by querying system tables to find out the schema version of all nodes that are currently
UP. If all the versions match, the check succeeds, otherwise it is retried periodically, until a
given timeout. This process is tunable in the driver’s configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datastax</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">driver</span><span class="o">.</span><span class="n">advanced</span><span class="o">.</span><span class="n">control</span><span class="o">-</span><span class="n">connection</span><span class="o">.</span><span class="n">schema</span><span class="o">-</span><span class="n">agreement</span> <span class="p">{</span>
  <span class="n">interval</span> <span class="o">=</span> <span class="mi">200</span> <span class="n">milliseconds</span>
  <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span> <span class="n">seconds</span>
  <span class="n">warn</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>After executing a statement, you can check whether schema agreement was successful or timed out with
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/cql/ExecutionInfo.html#isSchemaInAgreement--">ExecutionInfo#isSchemaInAgreement</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;CREATE TABLE...&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getExecutionInfo</span><span class="o">().</span><span class="na">isSchemaInAgreement</span><span class="o">())</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>You can also perform an on-demand check at any time with <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/session/Session.html#checkSchemaAgreementAsync--">Session#checkSchemaAgreementAsync</a> (or
its synchronous counterpart):</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">(</span><span class="n">session</span><span class="o">.</span><span class="na">checkSchemaAgreement</span><span class="o">())</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>A schema agreement failure is not fatal, but it might produce unexpected results (as explained at
the beginning of this section).</p>
<section id="schema-agreement-in-mixed-version-clusters">
<h4>Schema agreement in mixed-version clusters<a class="headerlink" href="#schema-agreement-in-mixed-version-clusters" title="Permalink to this headline">¶</a></h4>
<p>If you’re operating a cluster with different major/minor server releases (for example, Cassandra 2.1
and 2.2), schema agreement will never succeed. This is because the way the schema version is
computed changes across releases, so the nodes will report different versions even though they
actually agree (see <a class="reference external" href="https://datastax-oss.atlassian.net/browse/JAVA-750">JAVA-750</a> for the technical details).</p>
<p>This issue would be hard to fix in a reliable way, and shouldn’t be that much of a problem in
practice anyway: if you’re in the middle of a rolling upgrade, you’re probably not applying schema
changes at the same time.</p>
</section>
</section>
</section>
<section id="relation-to-token-metadata">
<h2>Relation to token metadata<a class="headerlink" href="#relation-to-token-metadata" title="Permalink to this headline">¶</a></h2>
<p>Some of the data in the <a class="reference external" href="../token/">token map</a> relies on keyspace metadata (any method that takes a
<code class="docutils literal notranslate"><span class="pre">CqlIdentifier</span></code> argument). If schema metadata is disabled or filtered, token metadata will also be
unavailable for the excluded keyspaces.</p>
</section>
<section id="performing-schema-updates-from-the-client">
<h2>Performing schema updates from the client<a class="headerlink" href="#performing-schema-updates-from-the-client" title="Permalink to this headline">¶</a></h2>
<p>If you issue schema-altering requests from the driver (e.g. <code class="docutils literal notranslate"><span class="pre">session.execute(&quot;CREATE</span> <span class="pre">TABLE</span> <span class="pre">..&quot;)</span></code>),
take a look at the <a class="reference external" href="../../performance/#schema-updates">Performance</a> page for a few tips.</p>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../node/index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Node metadata
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../token/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Token metadata
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.10.0.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="../../../../../stable/index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.12.0.x/index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.11.1.x/index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">Core driver</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../logging/index.html">Logging</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="../index.html">Metadata</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../node/index.html">Node metadata</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../paging/index.html">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ssl/index.html">SSL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../statements/batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../statements/per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../statements/simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../developer/index.html">Developer docs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../developer/common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/request_execution/index.html">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../mapper/index.html">Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../mapper/config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../mapper/daos/index.html">DAOs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/custom_types/index.html">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../mapper/daos/update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../mapper/entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mapper/mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../query_builder/index.html">Query builder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../query_builder/schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Schema metadata&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.10.0.x/manual/core/metadata/schema/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.10.0.x/docs/source/manual/core/metadata/schema/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Schema metadata</a><ul>
<li><a class="reference internal" href="#quick-overview">Quick overview</a></li>
<li><a class="reference internal" href="#dse">DSE</a></li>
<li><a class="reference internal" href="#notifications">Notifications</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#enabling-disabling">Enabling/disabling</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a></li>
<li><a class="reference internal" href="#schema-agreement">Schema agreement</a><ul>
<li><a class="reference internal" href="#schema-agreement-in-mixed-version-clusters">Schema agreement in mixed-version clusters</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#relation-to-token-metadata">Relation to token metadata</a></li>
<li><a class="reference internal" href="#performing-schema-updates-from-the-client">Performing schema updates from the client</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>