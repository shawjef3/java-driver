

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Paging | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/core/paging/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../"
            src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Java Driver.
            
            <a href="../../../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../index.html">
                Manual
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Core driver
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Paging</span>
</div>
                    </div>
                
                <section id="paging">
<h1>Paging<a class="headerlink" href="#paging" title="Permalink to this headline">¶</a></h1>
<section id="quick-overview">
<h2>Quick overview<a class="headerlink" href="#quick-overview" title="Permalink to this headline">¶</a></h2>
<p>How the server splits large result sets into multiple network responses.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">basic.request.page-size</span></code> in the configuration.</p></li>
<li><p>transparent in the synchronous API (<code class="docutils literal notranslate"><span class="pre">session.execute</span></code>): the driver fetches new pages in the
background as you iterate.</p></li>
<li><p>explicit in the asynchronous API (<code class="docutils literal notranslate"><span class="pre">session.executeAsync</span></code>):
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/AsyncPagingIterable.html#hasMorePages--">AsyncResultSet.hasMorePages()</a> and
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/AsyncPagingIterable.html#fetchNextPage--">AsyncResultSet.fetchNextPage()</a>.</p></li>
<li><p>paging state: record the current position and reuse it later (forward only).</p></li>
<li><p>offset queries: emulated client-side with <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/paging/OffsetPager.html">OffsetPager</a> (<strong>this comes with important performance
trade-offs, make sure you read and understand the full documentation below</strong>).</p></li>
</ul>
<hr class="docutils" />
<p>When a query returns many rows, it would be inefficient to return them as a single response message.
Instead, the driver breaks the results into <em>pages</em> which get returned as they are needed.</p>
</section>
<section id="setting-the-page-size">
<h2>Setting the page size<a class="headerlink" href="#setting-the-page-size" title="Permalink to this headline">¶</a></h2>
<p>The page size specifies how many rows the server will return in each network frame. You can set it
in the configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datastax</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">driver</span><span class="o">.</span><span class="n">basic</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">page</span><span class="o">-</span><span class="n">size</span> <span class="o">=</span> <span class="mi">5000</span>
</pre></div>
</div>
<p>It can be changed at runtime (the new value will be used for requests issued after the change). If
you have categories of queries that require different page sizes, use
<a class="reference external" href="../configuration#profiles">configuration profiles</a>.</p>
<p>Note that the page size is merely a hint; the server will not always return the exact number of
rows, it might decide to return slightly more or less.</p>
</section>
<section id="synchronous-paging">
<h2>Synchronous paging<a class="headerlink" href="#synchronous-paging" title="Permalink to this headline">¶</a></h2>
<p>The fetch size limits the number of results that are returned in one page; if you iterate past that,
the driver uses background queries to fetch subsequent pages. Here’s an example with a fetch size of
20:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;SELECT * FROM my_table WHERE k = 1&quot;</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Row</span> <span class="n">row</span> <span class="o">:</span> <span class="n">rs</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// process the row</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>    client         Session                          Cassandra
    --+--------------+---------------------------------+-----
      <span class="p">|</span>execute<span class="o">(</span>query<span class="o">)</span><span class="p">|</span>                                 <span class="p">|</span>
      <span class="p">|</span>-------------&gt;<span class="p">|</span>                                 <span class="p">|</span>
      <span class="p">|</span>              <span class="p">|</span> query rows <span class="m">1</span> to <span class="m">20</span>              <span class="p">|</span>
      <span class="p">|</span>              <span class="p">|</span>--------------------------------&gt;<span class="p">|</span>
      <span class="p">|</span>              <span class="p">|</span>                                 <span class="p">|</span>
      <span class="p">|</span>              <span class="p">|</span>create                           <span class="p">|</span>
      <span class="p">|</span>              <span class="p">|</span>------&gt;ResultSet                 <span class="p">|</span>
      <span class="p">|</span>                          <span class="p">|</span>                     <span class="p">|</span>
+-----+--------+-----------------+-+                   <span class="p">|</span>
<span class="p">|</span>For i in <span class="m">1</span>..20<span class="p">|</span>                 <span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
+--------------+                 <span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
<span class="p">|</span>     <span class="p">|</span>        get next row      <span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
<span class="p">|</span>     <span class="p">|</span>-------------------------&gt;<span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
<span class="p">|</span>     <span class="p">|</span>          row i           <span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
<span class="p">|</span>     <span class="p">|</span>&lt;-------------------------<span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
<span class="p">|</span>     <span class="p">|</span>                          <span class="p">|</span> <span class="p">|</span>                   <span class="p">|</span>
+-----+--------------------------+-+                   <span class="p">|</span>
      <span class="p">|</span>                          <span class="p">|</span>                     <span class="p">|</span>
      <span class="p">|</span>                          <span class="p">|</span>                     <span class="p">|</span>
      <span class="p">|</span>        get next row      <span class="p">|</span>                     <span class="p">|</span>
      <span class="p">|</span>-------------------------&gt;<span class="p">|</span>                     <span class="p">|</span>
      <span class="p">|</span>                          <span class="p">|</span> query rows <span class="m">21</span> to <span class="m">40</span> <span class="p">|</span>
      <span class="p">|</span>                          <span class="p">|</span>--------------------&gt;<span class="p">|</span>
      <span class="p">|</span>          row <span class="m">21</span>          <span class="p">|</span>                     <span class="p">|</span>
      <span class="p">|</span>&lt;------------------------ <span class="p">|</span>                     <span class="p">|</span>
</pre></div>
</div>
</section>
<section id="asynchronous-paging">
<h2>Asynchronous paging<a class="headerlink" href="#asynchronous-paging" title="Permalink to this headline">¶</a></h2>
<p>In previous versions of the driver, the synchronous and asynchronous APIs returned the same
<code class="docutils literal notranslate"><span class="pre">ResultSet</span></code> type. This made asynchronous paging very tricky, because it was very easy to
accidentally trigger background synchronous queries (which would defeat the whole purpose of async,
and potentially introduce deadlocks).</p>
<p>To avoid this problem, the driver’s asynchronous API now returns a dedicated <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/cql/AsyncResultSet.html">AsyncResultSet</a>;
iteration only yields the current page, and the next page must be fetched explicitly. To iterate a
result set in a fully asynchronous manner, you need to compose page futures using the methods of
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html">CompletionStage</a>. Here’s an example that prints each row on the command line:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">AsyncResultSet</span><span class="o">&gt;</span> <span class="n">resultSetFuture</span> <span class="o">=</span>
    <span class="n">session</span><span class="o">.</span><span class="na">executeAsync</span><span class="o">(</span><span class="s">&quot;SELECT * FROM myTable WHERE id = 1&quot;</span><span class="o">);</span>
<span class="c1">// The returned stage will complete once all the rows have been printed:</span>
<span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">printRowsFuture</span> <span class="o">=</span> <span class="n">resultSetFuture</span><span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">printRows</span><span class="o">);</span>

<span class="kd">private</span> <span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">printRows</span><span class="o">(</span><span class="n">AsyncResultSet</span> <span class="n">resultSet</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">Row</span> <span class="n">row</span> <span class="o">:</span> <span class="n">resultSet</span><span class="o">.</span><span class="na">currentPage</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">getFormattedContents</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">resultSet</span><span class="o">.</span><span class="na">hasMorePages</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">resultSet</span><span class="o">.</span><span class="na">fetchNextPage</span><span class="o">().</span><span class="na">thenCompose</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">printRows</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">CompletableFuture</span><span class="o">.</span><span class="na">completedFuture</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If you need to propagate state throughout the iteration, add parameters to the callback. Here’s an
example that counts the number of rows (obviously this is contrived, you would use <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">COUNT(*)</span></code>
instead of doing this client-side, but it illustrates the basic principle):</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">AsyncResultSet</span><span class="o">&gt;</span> <span class="n">resultSetFuture</span> <span class="o">=</span>
    <span class="n">session</span><span class="o">.</span><span class="na">executeAsync</span><span class="o">(</span><span class="s">&quot;SELECT * FROM myTable WHERE id = 1&quot;</span><span class="o">);</span>
<span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">countFuture</span> <span class="o">=</span> <span class="n">resultSetFuture</span><span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">rs</span> <span class="o">-&gt;</span> <span class="n">countRows</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>

<span class="kd">private</span> <span class="n">CompletionStage</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">countRows</span><span class="o">(</span><span class="n">AsyncResultSet</span> <span class="n">resultSet</span><span class="o">,</span> <span class="kt">int</span> <span class="n">previousPagesCount</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">previousPagesCount</span><span class="o">;</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">Row</span> <span class="n">row</span> <span class="o">:</span> <span class="n">resultSet</span><span class="o">.</span><span class="na">currentPage</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">resultSet</span><span class="o">.</span><span class="na">hasMorePages</span><span class="o">())</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">finalCount</span> <span class="o">=</span> <span class="n">count</span><span class="o">;</span> <span class="c1">// need a final variable to use in the lambda below</span>
    <span class="k">return</span> <span class="n">resultSet</span><span class="o">.</span><span class="na">fetchNextPage</span><span class="o">().</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">rs</span> <span class="o">-&gt;</span> <span class="n">countRows</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">finalCount</span><span class="o">));</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">CompletableFuture</span><span class="o">.</span><span class="na">completedFuture</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>See <a class="reference external" href="../async/">Asynchronous programming</a> for more tips about the async API.</p>
</section>
<section id="saving-and-reusing-the-paging-state">
<h2>Saving and reusing the paging state<a class="headerlink" href="#saving-and-reusing-the-paging-state" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it is convenient to interrupt paging and resume it later. For example, this could be
used for a stateless web service that displays a list of results with a link to the next page. When
the user clicks that link, we want to run the exact same query, except that the iteration should
start where we stopped the last time.</p>
<p>The driver exposes a <em>paging state</em> for that:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">&quot;your query&quot;</span><span class="o">);</span>
<span class="n">ByteBuffer</span> <span class="n">pagingState</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getExecutionInfo</span><span class="o">().</span><span class="na">getPagingState</span><span class="o">();</span>

<span class="c1">// Finish processing the current page</span>
<span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getAvailableWithoutFetching</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Row</span> <span class="n">row</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">one</span><span class="o">();</span>
  <span class="c1">// process the row</span>
<span class="o">}</span>

<span class="c1">// Later:</span>
<span class="n">SimpleStatement</span> <span class="n">statement</span> <span class="o">=</span>
    <span class="n">SimpleStatement</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="s">&quot;your query&quot;</span><span class="o">).</span><span class="na">setPagingState</span><span class="o">(</span><span class="n">pagingState</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
<span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">statement</span><span class="o">);</span>
</pre></div>
</div>
<p>Note the loop to finish the current page after we extract the state. The new statement will start at
the beginning of the next page, so we want to make sure we don’t leave a gap of unprocessed rows.</p>
<p>The paging state can only be reused with the exact same statement (same query string, same
parameters). It is an opaque value that is only meant to be collected, stored and re-used. If you
try to modify its contents or reuse it with a different statement, the results are unpredictable.</p>
<p>If you want additional safety, the driver also provides a “safe” wrapper around the raw value:
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/cql/PagingState.html">PagingState</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PagingState</span> <span class="n">pagingState</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getExecutionInfo</span><span class="o">().</span><span class="na">getSafePagingState</span><span class="o">();</span>
</pre></div>
</div>
<p>It works in the exact same manner, except that it will throw an <code class="docutils literal notranslate"><span class="pre">IllegalStateException</span></code> if you try
to reinject it in the wrong statement. This allows you to detect the error early, without a
roundtrip to the server.</p>
<p>Note that, if you use a simple statement and one of the bound values requires a <a class="reference external" href="../custom_codecs">custom
codec</a>, you have to provide a reference to the session when reinjecting the paging
state:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">CustomType</span> <span class="n">value</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">SimpleStatement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">SimpleStatement</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">&quot;query&quot;</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
<span class="c1">// session required here, otherwise you will get a CodecNotFoundException:</span>
<span class="n">statement</span> <span class="o">=</span> <span class="n">statement</span><span class="o">.</span><span class="na">setPagingState</span><span class="o">(</span><span class="n">pagingState</span><span class="o">,</span> <span class="n">session</span><span class="o">);</span>
</pre></div>
</div>
<p>This is a small corner case because checking the state requires encoding the values, and a simple
statement doesn’t have a reference to the codec registry. If you don’t use custom codecs, or if the
statement is a bound statement, you can use the regular <code class="docutils literal notranslate"><span class="pre">setPagingState(pagingState)</span></code>.</p>
</section>
<section id="offset-queries">
<h2>Offset queries<a class="headerlink" href="#offset-queries" title="Permalink to this headline">¶</a></h2>
<p>Saving the paging state works well when you only let the user move from one page to the next. But in
most Web UIs and REST services, you need paginated results with random access, for example: “given a
page size of 20 elements, fetch page 5”.</p>
<p>Cassandra does not support this natively (see
<a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-6511">CASSANDRA-6511</a>), because such queries are
inherently linear: the database would have to restart from the beginning every time, and skip
unwanted rows until it reaches the desired offset.</p>
<p>However, random pagination is a real need for many applications, and linear performance can be a
reasonable trade-off if the cardinality stays low. The driver provides a utility to emulate offset
queries on the client side: <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/paging/OffsetPager.html">OffsetPager</a>.</p>
<section id="performance-considerations">
<h3>Performance considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">¶</a></h3>
<p>For each page that you want to retrieve:</p>
<ul class="simple">
<li><p>you need to re-execute the query, in order to start with a fresh result set;</p></li>
<li><p>you then pass the result to <code class="docutils literal notranslate"><span class="pre">OffsetPager</span></code>, which starts iterating from the beginning, and skips
rows until it reaches the desired offset.</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&quot;SELECT ...&quot;</span><span class="o">;</span>
<span class="n">OffsetPager</span> <span class="n">pager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OffsetPager</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>

<span class="c1">// Get page 2: start from a fresh result set, throw away rows 1-20, then return rows 21-40</span>
<span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
<span class="n">OffsetPager</span><span class="o">.</span><span class="na">Page</span><span class="o">&lt;</span><span class="n">Row</span><span class="o">&gt;</span> <span class="n">page2</span> <span class="o">=</span> <span class="n">pager</span><span class="o">.</span><span class="na">getPage</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>

<span class="c1">// Get page 5: start from a fresh result set, throw away rows 1-80, then return rows 81-100</span>
<span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
<span class="n">OffsetPager</span><span class="o">.</span><span class="na">Page</span><span class="o">&lt;</span><span class="n">Row</span><span class="o">&gt;</span> <span class="n">page5</span> <span class="o">=</span> <span class="n">pager</span><span class="o">.</span><span class="na">getPage</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">getPage</span></code> can also process the entity iterables returned by the <a class="reference external" href="../../mapper/">mapper</a>.</p>
</section>
<section id="establishing-application-level-guardrails">
<h3>Establishing application-level guardrails<a class="headerlink" href="#establishing-application-level-guardrails" title="Permalink to this headline">¶</a></h3>
<p>Linear performance should be fine for the values typically encountered in real-world applications:
for example, if the page size is 25 and users never go past page 10, the worst case is only 250
rows, which is a very small result set. However, we strongly recommend that you implement hard
limits in your application code: if the page number is exposed to the user (for example if it is
passed as a URL parameter), make sure it is properly validated and enforce a maximum, so that an
attacker can’t inject a large value that could potentially fetch millions of rows.</p>
</section>
<section id="relation-with-protocol-level-paging">
<h3>Relation with protocol-level paging<a class="headerlink" href="#relation-with-protocol-level-paging" title="Permalink to this headline">¶</a></h3>
<p>Offset paging has no direct relation to <code class="docutils literal notranslate"><span class="pre">basic.request.page-size</span></code>. Protocol-level paging happens
under the hood, and is completely transparent for offset paging: <code class="docutils literal notranslate"><span class="pre">OffsetPager</span></code> will work the same no
matter how many network roundtrips were needed to fetch the result. You don’t need to set the
protocol page size and the logical page size to the same value.</p>
<hr class="docutils" />
<p>The <a class="reference external" href="https://github.com/datastax/java-driver/tree/4.x/examples/src/main/java/com/datastax/oss/driver/examples/paging">driver examples</a> include two complete web service implementations demonstrating forward-only
and offset paging.</p>
</section>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../non_blocking/index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Non-blocking programming
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../performance/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Performance
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.10.0.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="../../../../stable/index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.12.0.x/index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.11.1.x/index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Core driver</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../metadata/index.html">Metadata</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../metadata/node/index.html">Node metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../metadata/schema/index.html">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../metadata/token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ssl/index.html">SSL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../statements/batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../statements/per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../statements/simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../developer/index.html">Developer docs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../developer/common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/request_execution/index.html">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../mapper/index.html">Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../mapper/config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../mapper/daos/index.html">DAOs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/custom_types/index.html">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mapper/daos/update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../mapper/entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mapper/mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../query_builder/index.html">Query builder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../query_builder/schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../query_builder/schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../query_builder/update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Paging&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.10.0.x/manual/core/paging/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.10.0.x/docs/source/manual/core/paging/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Paging</a><ul>
<li><a class="reference internal" href="#quick-overview">Quick overview</a></li>
<li><a class="reference internal" href="#setting-the-page-size">Setting the page size</a></li>
<li><a class="reference internal" href="#synchronous-paging">Synchronous paging</a></li>
<li><a class="reference internal" href="#asynchronous-paging">Asynchronous paging</a></li>
<li><a class="reference internal" href="#saving-and-reusing-the-paging-state">Saving and reusing the paging state</a></li>
<li><a class="reference internal" href="#offset-queries">Offset queries</a><ul>
<li><a class="reference internal" href="#performance-considerations">Performance considerations</a></li>
<li><a class="reference internal" href="#establishing-application-level-guardrails">Establishing application-level guardrails</a></li>
<li><a class="reference internal" href="#relation-with-protocol-level-paging">Relation with protocol-level paging</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>