

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Query builder | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/query_builder/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../"
            src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../_static/underscore.js"></script>
            
        
            
                <script src="../../_static/doctools.js"></script>
            
        
            
                <script src="../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Java Driver.
            
            <a href="../../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Manual
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Query builder</span>
</div>
                    </div>
                
                <section id="query-builder">
<h1>Query builder<a class="headerlink" href="#query-builder" title="Permalink to this headline">¶</a></h1>
<p>The query builder is a utility to <strong>generate CQL queries programmatically</strong>. For example, it could
be used to:</p>
<ul class="simple">
<li><p>given a set of optional search parameters, build a search query dynamically depending on which
parameters are provided;</p></li>
<li><p>given a Java class, generate the CRUD queries that map instances of that class to a Cassandra
table.</p></li>
</ul>
<p>To use it in your application, add the following dependency:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.scylladb<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>java-driver-query-builder<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${driver.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>Here is our canonical example rewritten with the query builder:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">com.datastax.oss.driver.api.querybuilder.QueryBuilder.*</span><span class="o">;</span>

<span class="k">try</span> <span class="o">(</span><span class="n">CqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">CqlSession</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
  
  <span class="n">Select</span> <span class="n">query</span> <span class="o">=</span> <span class="n">selectFrom</span><span class="o">(</span><span class="s">&quot;system&quot;</span><span class="o">,</span> <span class="s">&quot;local&quot;</span><span class="o">).</span><span class="na">column</span><span class="o">(</span><span class="s">&quot;release_version&quot;</span><span class="o">);</span> <span class="c1">// SELECT release_version FROM system.local</span>
  <span class="n">SimpleStatement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
  
  <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">statement</span><span class="o">);</span>
  <span class="n">Row</span> <span class="n">row</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">one</span><span class="o">();</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;release_version&quot;</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
<section id="general-concepts">
<h2>General concepts<a class="headerlink" href="#general-concepts" title="Permalink to this headline">¶</a></h2>
<section id="fluent-api">
<h3>Fluent API<a class="headerlink" href="#fluent-api" title="Permalink to this headline">¶</a></h3>
<p>All the starting methods are centralized in the <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/querybuilder/QueryBuilder.html">QueryBuilder</a> and <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/querybuilder/SchemaBuilder.html">SchemaBuilder</a> classes. To get
started, add one of the following imports:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// For DML queries, such as SELECT </span>
<span class="kn">import static</span> <span class="nn">com.datastax.oss.driver.api.querybuilder.QueryBuilder.*</span><span class="o">;</span>

<span class="c1">// For DDL queries, such as CREATE TABLE</span>
<span class="kn">import static</span> <span class="nn">com.datastax.oss.driver.api.querybuilder.SchemaBuilder.*</span><span class="o">;</span>
</pre></div>
</div>
<p>Choose the method matching your desired statement, for example <code class="docutils literal notranslate"><span class="pre">selectFrom</span></code>. Then use your IDE’s
completion and the javadocs to add query parts:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Select</span> <span class="n">select</span> <span class="o">=</span>
    <span class="n">selectFrom</span><span class="o">(</span><span class="s">&quot;ks&quot;</span><span class="o">,</span> <span class="s">&quot;user&quot;</span><span class="o">)</span>
          <span class="o">.</span><span class="na">column</span><span class="o">(</span><span class="s">&quot;first_name&quot;</span><span class="o">)</span>
          <span class="o">.</span><span class="na">column</span><span class="o">(</span><span class="s">&quot;last_name&quot;</span><span class="o">)</span>
          <span class="o">.</span><span class="na">whereColumn</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">bindMarker</span><span class="o">());</span>
<span class="c1">// SELECT first_name,last_name FROM ks.user WHERE id=?</span>
</pre></div>
</div>
<p>When your query is complete, you can either extract a raw query string, or turn it into a
<a class="reference external" href="../core/statements/simple">simple statement</a> (or its builder):</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">cql</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="na">asCql</span><span class="o">();</span>
<span class="n">SimpleStatement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">SimpleStatementBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>
</pre></div>
</div>
</section>
<section id="datastax-enterprise">
<h3>Datastax Enterprise<a class="headerlink" href="#datastax-enterprise" title="Permalink to this headline">¶</a></h3>
<p>The driver provides two additional entry points for DSE-specific queries: <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/dse/driver/api/querybuilder/DseQueryBuilder.html">DseQueryBuilder</a> and
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/dse/driver/api/querybuilder/DseSchemaBuilder.html">DseSchemaBuilder</a>. They extend their respective non-DSE counterparts, so anything that is available
on the default query builder can also be done with the DSE query builder.</p>
<p>We recommend that you use those classes if you are targeting Datastax Enterprise; they will be
enriched in the future if DSE adds custom CQL syntax.</p>
<p>Currently, the only difference is the support for the <code class="docutils literal notranslate"><span class="pre">DETERMINISTIC</span></code> and <code class="docutils literal notranslate"><span class="pre">MONOTONIC</span></code> keywords when
generating <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">FUNCTION</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">AGGREGATE</span></code> statements:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">com.datastax.dse.driver.api.querybuilder.DseSchemaBuilder.createDseFunction</span><span class="o">;</span>

<span class="n">createDseFunction</span><span class="o">(</span><span class="s">&quot;func1&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withParameter</span><span class="o">(</span><span class="s">&quot;param1&quot;</span><span class="o">,</span> <span class="n">DataTypes</span><span class="o">.</span><span class="na">INT</span><span class="o">)</span>
    <span class="o">.</span><span class="na">returnsNullOnNull</span><span class="o">()</span>
    <span class="o">.</span><span class="na">returnsType</span><span class="o">(</span><span class="n">DataTypes</span><span class="o">.</span><span class="na">INT</span><span class="o">)</span>
    <span class="o">.</span><span class="na">deterministic</span><span class="o">()</span>
    <span class="o">.</span><span class="na">monotonic</span><span class="o">();</span>
<span class="c1">// CREATE FUNCTION func1 (param1 int) RETURNS NULL ON NULL INPUT RETURNS int DETERMINISTIC MONOTONIC</span>
</pre></div>
</div>
</section>
<section id="immutability">
<h3>Immutability<a class="headerlink" href="#immutability" title="Permalink to this headline">¶</a></h3>
<p>All types in the fluent API are immutable. This means that every step creates a new object:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">SelectFrom</span> <span class="n">selectFrom</span> <span class="o">=</span> <span class="n">selectFrom</span><span class="o">(</span><span class="s">&quot;ks&quot;</span><span class="o">,</span> <span class="s">&quot;user&quot;</span><span class="o">);</span>

<span class="n">Select</span> <span class="n">select1</span> <span class="o">=</span> <span class="n">selectFrom</span><span class="o">.</span><span class="na">column</span><span class="o">(</span><span class="s">&quot;first_name&quot;</span><span class="o">);</span> <span class="c1">// SELECT first_name FROM ks.user</span>
<span class="n">Select</span> <span class="n">select2</span> <span class="o">=</span> <span class="n">selectFrom</span><span class="o">.</span><span class="na">column</span><span class="o">(</span><span class="s">&quot;last_name&quot;</span><span class="o">);</span> <span class="c1">// SELECT last_name FROM ks.user</span>

<span class="k">assert</span> <span class="n">select1</span> <span class="o">!=</span> <span class="n">select2</span><span class="o">;</span>
</pre></div>
</div>
<p>Immutability has great benefits:</p>
<ul class="simple">
<li><p><strong>thread safety</strong>: you can share built queries across threads, without any race condition or
badly published state.</p></li>
<li><p><strong>zero sharing</strong>: when you build multiple queries from a shared “base” (as in the example above),
all the queries are totally independent, changes to one query will never “pollute” another.</p></li>
</ul>
<p>On the downside, immutability means that the query builder creates lots of short-lived objects.
Modern garbage collectors are good at handling that, but still we recommend that you <strong>avoid using
the query builder in your hot path</strong>:</p>
<ul>
<li><p>favor <a class="reference external" href="../core/statements/prepared">bound statements</a> for queries that are used often. You can
still use the query builder and prepare the result:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// During application initialization:</span>
<span class="n">Select</span> <span class="n">selectUser</span> <span class="o">=</span> <span class="n">selectFrom</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">).</span><span class="na">all</span><span class="o">().</span><span class="na">whereColumn</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">bindMarker</span><span class="o">());</span>
<span class="c1">// SELECT * FROM user WHERE id=?</span>
<span class="n">PreparedStatement</span> <span class="n">preparedSelectUser</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">prepare</span><span class="o">(</span><span class="n">selectUser</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

<span class="c1">// At runtime:</span>
<span class="n">session</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">preparedSelectUser</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="n">userId</span><span class="o">));</span>
</pre></div>
</div>
</li>
<li><p>for queries that never change, build them when your application initializes, and store them in a
field or constant for later.</p></li>
<li><p>for queries that are built dynamically, consider using a cache.</p></li>
</ul>
</section>
<section id="identifiers">
<h3>Identifiers<a class="headerlink" href="#identifiers" title="Permalink to this headline">¶</a></h3>
<p>All fluent API methods use <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.10.0.x/api/com/datastax/oss/driver/api/core/CqlIdentifier.html">CqlIdentifier</a> for schema element names (keyspaces, tables, columns…).
But, for convenience, there are also <code class="docutils literal notranslate"><span class="pre">String</span></code> overloads that take the CQL form (as see <a class="reference external" href="../case_sensitivity">Case
sensitivity</a> for more explanations).</p>
<p>For conciseness, we’ll use the string-based versions for the examples in this manual.</p>
</section>
</section>
<section id="non-goals">
<h2>Non-goals<a class="headerlink" href="#non-goals" title="Permalink to this headline">¶</a></h2>
<p>The query builder is <strong>NOT</strong>:</p>
<section id="a-crutch-to-learn-cql">
<h3>A crutch to learn CQL<a class="headerlink" href="#a-crutch-to-learn-cql" title="Permalink to this headline">¶</a></h3>
<p>While the fluent API guides you, it does not encode every rule of the CQL grammar. Also, it supports
a wide range of Cassandra versions, some of which may be more recent than your production target, or
not even released yet. It’s still possible to generate invalid CQL syntax if you don’t know what
you’re doing.</p>
<p>You should always start with a clear idea of the CQL query, and write the builder code that produces
it, not the other way around.</p>
</section>
<section id="a-better-way-to-write-static-queries">
<h3>A better way to write static queries<a class="headerlink" href="#a-better-way-to-write-static-queries" title="Permalink to this headline">¶</a></h3>
<p>The primary use case of the query builder is dynamic generation. You will get the most value out of
it when you do things like:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// The columns to select are only known at runtime:</span>
<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">columnName</span> <span class="o">:</span> <span class="n">columnNames</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">select</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="na">column</span><span class="o">(</span><span class="n">columnName</span><span class="o">)</span>
<span class="o">}</span>

<span class="c1">// If a search parameter is present, add the corresponding WHERE clause:</span>
<span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">select</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="na">whereColumn</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If all of your queries could also be written as compile-time string constants, ask yourself what the
query builder is really buying you:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Built version:</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Statement</span> <span class="n">SELECT_USERS</span> <span class="o">=</span>
    <span class="n">selectFrom</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">).</span><span class="na">all</span><span class="o">().</span><span class="na">limit</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>

<span class="c1">// String version:</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Statement</span> <span class="n">SELECT_USERS</span> <span class="o">=</span>
    <span class="n">SimpleStatement</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">&quot;SELECT * FROM user LIMIT 10&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>The built version:</p>
<ul class="simple">
<li><p>is slightly more expensive to build (admittedly, that is not really an issue for constants);</p></li>
<li><p>is not more readable;</p></li>
<li><p>is not necessarily less error-prone (see the previous section).</p></li>
</ul>
<p>It eventually boils down to personal taste, but for simple cases you should consider raw strings as
a better alternative.</p>
</section>
</section>
<section id="building-queries">
<h2>Building queries<a class="headerlink" href="#building-queries" title="Permalink to this headline">¶</a></h2>
<p>For a complete tour of the API, browse the child pages in this manual:</p>
<ul class="simple">
<li><p>statement types:</p>
<ul>
<li><p><a class="reference external" href="select/">SELECT</a></p></li>
<li><p><a class="reference external" href="insert/">INSERT</a></p></li>
<li><p><a class="reference external" href="update/">UPDATE</a></p></li>
<li><p><a class="reference external" href="delete/">DELETE</a></p></li>
<li><p><a class="reference external" href="truncate/">TRUNCATE</a></p></li>
<li><p><a class="reference external" href="schema/">Schema builder</a> (for DDL statements such as CREATE TABLE, etc.)</p></li>
</ul>
</li>
<li><p>common topics:</p>
<ul>
<li><p><a class="reference external" href="relation/">Relations</a></p></li>
<li><p><a class="reference external" href="condition/">Conditions</a></p></li>
<li><p><a class="reference external" href="term/">Terms</a></p></li>
<li><p><a class="reference external" href="idempotence/">Idempotence</a></p></li>
</ul>
</li>
</ul>
<div class="toctree-wrapper compound">
</div>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../osgi/index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />OSGi
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="condition/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Conditions
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.10.0.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="../../../stable/index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-4.12.0.x/index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-4.11.1.x/index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core/index.html">Core driver</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../core/configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/logging/index.html">Logging</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../core/metadata/index.html">Metadata</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/metadata/node/index.html">Node metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/metadata/schema/index.html">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/metadata/token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/paging/index.html">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/ssl/index.html">SSL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../core/statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/statements/batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/statements/per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/statements/simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/index.html">Developer docs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../developer/common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/request_execution/index.html">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../mapper/index.html">Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../mapper/config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../mapper/config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../mapper/daos/index.html">DAOs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/custom_types/index.html">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mapper/daos/update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mapper/entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mapper/mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 current has-children current-page"><a class="current reference internal" href="#">Query builder</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Query builder&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.10.0.x/manual/query_builder/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.10.0.x/docs/source/manual/query_builder/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Query builder</a><ul>
<li><a class="reference internal" href="#general-concepts">General concepts</a><ul>
<li><a class="reference internal" href="#fluent-api">Fluent API</a></li>
<li><a class="reference internal" href="#datastax-enterprise">Datastax Enterprise</a></li>
<li><a class="reference internal" href="#immutability">Immutability</a></li>
<li><a class="reference internal" href="#identifiers">Identifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#non-goals">Non-goals</a><ul>
<li><a class="reference internal" href="#a-crutch-to-learn-cql">A crutch to learn CQL</a></li>
<li><a class="reference internal" href="#a-better-way-to-write-static-queries">A better way to write static queries</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-queries">Building queries</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>