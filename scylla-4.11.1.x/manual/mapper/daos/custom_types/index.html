

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Custom result types | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://java-driver.docs.scylladb.com/stable/manual/mapper/daos/custom_types/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../../"
            src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Java Driver.
            
            <a href="../../../../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://java-driver.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Java Driver
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../../index.html">
                Manual
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../../index.html">
                Mapper
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                DAOs
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Custom result types</span>
</div>
                    </div>
                
                <section id="custom-result-types">
<h1>Custom result types<a class="headerlink" href="#custom-result-types" title="Permalink to this headline">¶</a></h1>
<p>The mapper supports a pre-defined set of built-in types for DAO method results. For example, a
<a class="reference external" href="../select/#return-type">Select</a> method can return a single entity, an asynchronous
<code class="docutils literal notranslate"><span class="pre">CompletionStage</span></code>, a <code class="docutils literal notranslate"><span class="pre">ReactiveResultSet</span></code>, etc.</p>
<p>Sometimes it’s convenient to use your own types. For example if you use a specific Reactive Streams
implementation (RxJava, Reactor, Mutiny…), you probably want your DAOs to return those types
directly, instead of having to wrap every call manually.</p>
<p>To achieve this, the mapper allows you to plug custom logic that will get invoked when an unknown
type is encountered.</p>
<p>In the rest of this page, we’ll show a simple example that replaces Java’s <code class="docutils literal notranslate"><span class="pre">CompletableFuture</span></code> with
Guava’s <code class="docutils literal notranslate"><span class="pre">ListenableFuture</span></code>. Our goal is to have the mapper implement this interface:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.google.common.util.concurrent.ListenableFuture</span><span class="o">;</span>

<span class="nd">@Dao</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProductDao</span> <span class="o">{</span>
  <span class="nd">@Select</span>
  <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span> <span class="nf">select</span><span class="o">(</span><span class="n">UUID</span> <span class="n">id</span><span class="o">);</span>

  <span class="nd">@Update</span>
  <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">update</span><span class="o">(</span><span class="n">Product</span> <span class="n">entity</span><span class="o">);</span>

  <span class="nd">@Insert</span>
  <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">insert</span><span class="o">(</span><span class="n">Product</span> <span class="n">entity</span><span class="o">);</span>

  <span class="nd">@Delete</span>
  <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">delete</span><span class="o">(</span><span class="n">Product</span> <span class="n">entity</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<section id="writing-the-producers">
<h2>Writing the producers<a class="headerlink" href="#writing-the-producers" title="Permalink to this headline">¶</a></h2>
<p>The basic component that encapsulates conversion logic is <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.11.1.x/api/com/datastax/oss/driver/api/mapper/result/MapperResultProducer.html">MapperResultProducer</a>. Our DAO has two
different return types: <code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Void&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Product&gt;</span></code>. So we’re going to
write two producers:</p>
<section id="future-of-void">
<h3>Future of void<a class="headerlink" href="#future-of-void" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.datastax.oss.driver.api.core.type.reflect.GenericType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.util.concurrent.Futures</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.util.concurrent.ListenableFuture</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.util.concurrent.SettableFuture</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FutureOfVoidProducer</span> <span class="kd">implements</span> <span class="n">MapperResultProducer</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">GenericType</span><span class="o">&lt;</span><span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;&gt;</span> <span class="n">PRODUCED_TYPE</span> <span class="o">=</span>
      <span class="k">new</span> <span class="n">GenericType</span><span class="o">&lt;</span><span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;&gt;()</span> <span class="o">{};</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canProduce</span><span class="o">(</span><span class="n">GenericType</span><span class="o">&lt;?&gt;</span> <span class="n">resultType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">resultType</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">PRODUCED_TYPE</span><span class="o">);</span>                                   <span class="c1">// (1)</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">execute</span><span class="o">(</span>
      <span class="n">Statement</span><span class="o">&lt;?&gt;</span> <span class="n">statement</span><span class="o">,</span> <span class="n">MapperContext</span> <span class="n">context</span><span class="o">,</span> <span class="n">EntityHelper</span><span class="o">&lt;?&gt;</span> <span class="n">entityHelper</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">CqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>                                 <span class="c1">// (2)</span>
    <span class="n">SettableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">SettableFuture</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>                     <span class="c1">// (3)</span>
    <span class="n">session</span><span class="o">.</span><span class="na">executeAsync</span><span class="o">(</span><span class="n">statement</span><span class="o">).</span><span class="na">whenComplete</span><span class="o">(</span>
        <span class="o">(</span><span class="n">resultSet</span><span class="o">,</span> <span class="n">error</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">result</span><span class="o">.</span><span class="na">setException</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="o">{</span> 
            <span class="n">result</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
          <span class="o">}});</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="nf">wrapError</span><span class="o">(</span><span class="n">Exception</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Futures</span><span class="o">.</span><span class="na">immediateFailedFuture</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>                               <span class="c1">// (4)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>All the producer methods will be invoked at runtime, by the mapper-generated DAO implementation:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">canProduce()</span></code> is used to select a producer. All registered producers are tried in the order that
they were added, the first one that returns <code class="docutils literal notranslate"><span class="pre">true</span></code> is used. The <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.11.1.x/api/com/datastax/oss/driver/api/core/type/reflect/GenericType.html">GenericType</a> argument is a
runtime representation of the static type. Here we know exactly the type we’re looking for:
<code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Void&gt;</span></code>. So we can use simple equality.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">execute()</span></code> is invoked once the statement is ready to be sent. Note that the producer is not only
responsible for converting the result, but also for invoking the appropriate execution method: to
this effect, it receives the <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.11.1.x/api/com/datastax/oss/driver/api/mapper/MapperContext.html">MapperContext</a>, which provides access to the session. The
<code class="docutils literal notranslate"><span class="pre">entityHelper</span></code> argument is not used in this implementation (and in fact it happens to be <code class="docutils literal notranslate"><span class="pre">null</span></code>);
see the next producer for more explanations.</p></li>
<li><p>We execute the statement asynchronously to obtain a <code class="docutils literal notranslate"><span class="pre">CompletionStage</span></code>, and then convert it into a
<code class="docutils literal notranslate"><span class="pre">ListenableFuture</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wrapError()</span></code> handles any error thrown throughout the process (either while building the
statement, or while invoking <code class="docutils literal notranslate"><span class="pre">execute()</span></code> in this class). Clients of asynchronous APIs generally
expect to deal with exceptions in future callbacks rather than having to catch them directly, so
we create a failed future.</p></li>
</ol>
<p>Note that we specialized the return types of <code class="docutils literal notranslate"><span class="pre">execute()</span></code> and <code class="docutils literal notranslate"><span class="pre">wrapError()</span></code>, instead of using
<code class="docutils literal notranslate"><span class="pre">Object</span></code> as declared by the parent interface. This is not strictly necessary (the calling code only
knows the parent interface, so there <em>will</em> be an unchecked cast), but it makes the code a bit nicer
to read.</p>
</section>
<section id="future-of-entity">
<h3>Future of entity<a class="headerlink" href="#future-of-entity" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FutureOfEntityProducer</span> <span class="kd">implements</span> <span class="n">MapperResultProducer</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canProduce</span><span class="o">(</span><span class="n">GenericType</span><span class="o">&lt;?&gt;</span> <span class="n">resultType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">resultType</span><span class="o">.</span><span class="na">getRawType</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">ListenableFuture</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>             <span class="c1">// (1)</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;?&gt;</span> <span class="n">execute</span><span class="o">(</span>
      <span class="n">Statement</span><span class="o">&lt;?&gt;</span> <span class="n">statement</span><span class="o">,</span> <span class="n">MapperContext</span> <span class="n">context</span><span class="o">,</span> <span class="n">EntityHelper</span><span class="o">&lt;?&gt;</span> <span class="n">entityHelper</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">assert</span> <span class="n">entityHelper</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">SettableFuture</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">SettableFuture</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="n">CqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
    <span class="n">session</span>
        <span class="o">.</span><span class="na">executeAsync</span><span class="o">(</span><span class="n">statement</span><span class="o">)</span>
        <span class="o">.</span><span class="na">whenComplete</span><span class="o">(</span>
            <span class="o">(</span><span class="n">resultSet</span><span class="o">,</span> <span class="n">error</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">error</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">result</span><span class="o">.</span><span class="na">setException</span><span class="o">(</span><span class="n">error</span><span class="o">);</span>
              <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">Row</span> <span class="n">row</span> <span class="o">=</span> <span class="n">resultSet</span><span class="o">.</span><span class="na">one</span><span class="o">();</span>
                <span class="n">result</span><span class="o">.</span><span class="na">set</span><span class="o">((</span><span class="n">row</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">entityHelper</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">row</span><span class="o">));</span>      <span class="c1">// (2)</span>
              <span class="o">}</span>
            <span class="o">});</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;?&gt;</span> <span class="n">wrapError</span><span class="o">(</span><span class="n">Exception</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Futures</span><span class="o">.</span><span class="na">immediateFailedFuture</span><span class="o">(</span><span class="n">error</span><span class="o">);</span> <span class="c1">// same as other producer</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<ol class="simple">
<li><p>We could use an exact match with <code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Product&gt;</span></code> like the previous example, but
that’s not very scalable: in a real application, we’ll probably have more than one entity, we
don’t want to write a separate producer every time. So instead we match <code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;?&gt;</span></code>.
Note that this would also match <code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Void&gt;</span></code>, so we’ll have to be careful of the order
of the producers (more on that in the “packaging” section below).</p></li>
<li><p>Whenever a return type references a mapped entity, the mapper processor will detect it and inject
the corresponding <a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.11.1.x/api/com/datastax/oss/driver/api/mapper/entity/EntityHelper.html">EntityHelper</a> in the <code class="docutils literal notranslate"><span class="pre">execute()</span></code> method. This is a general-purpose utility
class used throughout the mapper, in this case the method we’re more specifically interested in is
<code class="docutils literal notranslate"><span class="pre">get()</span></code>: it allows us to convert CQL rows into entity instances.</p></li>
</ol>
<p>At most one entity class is allowed in the return type.</p>
</section>
<section id="matching-more-complex-types">
<h3>Matching more complex types<a class="headerlink" href="#matching-more-complex-types" title="Permalink to this headline">¶</a></h3>
<p>The two examples above (exact match and matching the raw type) should cover the vast majority of
needs. Occasionally you may encounter cases with deeper level of parameterization, such as
<code class="docutils literal notranslate"><span class="pre">ListenableFuture&lt;Optional&lt;Product&gt;&gt;</span></code>. To match this you’ll have to call <code class="docutils literal notranslate"><span class="pre">getType()</span></code> and switch to
the <code class="docutils literal notranslate"><span class="pre">java.lang.reflect</span></code> world:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.lang.reflect.ParameterizedType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Type</span><span class="o">;</span>

<span class="c1">// Matches ListenableFuture&lt;Optional&lt;?&gt;&gt;</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canProduce</span><span class="o">(</span><span class="n">GenericType</span><span class="o">&lt;?&gt;</span> <span class="n">genericType</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">genericType</span><span class="o">.</span><span class="na">getRawType</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">ListenableFuture</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">Type</span> <span class="n">type</span> <span class="o">=</span> <span class="n">genericType</span><span class="o">.</span><span class="na">getType</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="k">instanceof</span> <span class="n">ParameterizedType</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Type</span><span class="o">[]</span> <span class="n">arguments</span> <span class="o">=</span> <span class="o">((</span><span class="n">ParameterizedType</span><span class="o">)</span> <span class="n">type</span><span class="o">).</span><span class="na">getActualTypeArguments</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">arguments</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Type</span> <span class="n">argument</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">return</span> <span class="n">argument</span> <span class="k">instanceof</span> <span class="n">ParameterizedType</span>
            <span class="o">&amp;&amp;</span> <span class="o">((</span><span class="n">ParameterizedType</span><span class="o">)</span> <span class="n">argument</span><span class="o">).</span><span class="na">getRawType</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">Optional</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="packaging-the-producers-in-a-service">
<h2>Packaging the producers in a service<a class="headerlink" href="#packaging-the-producers-in-a-service" title="Permalink to this headline">¶</a></h2>
<p>Once all the producers are ready, we package them in a class that implements
<a class="reference external" href="https://java-driver.docs.scylladb.com/scylla-4.11.1.x/api/com/datastax/oss/driver/api/mapper/result/MapperResultProducerService.html">MapperResultProducerService</a>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuavaFutureProducerService</span> <span class="kd">implements</span> <span class="n">MapperResultProducerService</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">MapperResultProducer</span><span class="o">&gt;</span> <span class="nf">getProducers</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
        <span class="c1">// Order matters, the most specific must come first.</span>
        <span class="k">new</span> <span class="n">FutureOfVoidProducer</span><span class="o">(),</span> <span class="k">new</span> <span class="n">FutureOfEntityProducer</span><span class="o">());</span>
  <span class="o">}</span>  
<span class="o">}</span>
</pre></div>
</div>
<p>As hinted previously, the order of the producers matter: they will be tried from left to right.
Since our “future of entity” producer would also match <code class="docutils literal notranslate"><span class="pre">Void</span></code>, it must come last.</p>
<p>The mapper uses the Java Service Provider mechanism to register producers: create a new file
<code class="docutils literal notranslate"><span class="pre">META-INF/services/com.datastax.oss.driver.api.mapper.result.MapperResultProducerService</span></code>,
containing the name of the implementation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">GuavaFutureProducerService</span>
</pre></div>
</div>
<p>You can put the producers, service and service descriptor directly in your application, or
distribute them as a standalone JAR if you intend to reuse them.</p>
</section>
<section id="disabling-custom-types">
<h2>Disabling custom types<a class="headerlink" href="#disabling-custom-types" title="Permalink to this headline">¶</a></h2>
<p>Custom types are handled at runtime. This goes a bit against the philosophy of the rest of the
object mapper, where most of the work is done at compile time thanks to annotation processing. There
are ways to extend the mapper processor, but we feel that this would be too complicated for this use
case.</p>
<p>One downside is that validation can now only be done at runtime: if you use a return type that isn’t
supported by any producer, you’ll only find out when you call the method.</p>
<p><strong>If you don’t use custom types at all</strong>, you can disable the feature with an annotation processor
flag:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;compilerArgument&gt;</span>-Acom.datastax.oss.driver.mapper.customResults.enabled=false<span class="nt">&lt;/compilerArgument&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
</pre></div>
</div>
<p>With this configuration, if a DAO method declares a non built-in return type, it will be surfaced as
a compiler error.</p>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />DAOs
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../delete/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Delete methods
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    4.11.1.x
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                        <li>
                            <a href="../../../../../stable/index.html">4.13.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.12.0.x/index.html">4.12.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="index.html">4.11.1.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.10.0.x/index.html">4.10.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-4.7.2.x/index.html">4.7.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.2.x/index.html">3.11.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.11.0.x/index.html">3.11.0.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.10.2.x/index.html">3.10.2.x</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../../../../scylla-3.7.2.x/index.html">3.7.2.x</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Java Driver for Scylla and Apache Cassandra®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">API Documentation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../index.html">Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../api_conventions/index.html">API conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../case_sensitivity/index.html">Case sensitivity</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../core/index.html">Core driver</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../core/address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/async/index.html">Asynchronous programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/authentication/index.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/bom/index.html">Bill of Materials (BOM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/compression/index.html">Compression</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../core/configuration/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../core/configuration/reference/README.html">Reference configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/control_connection/index.html">Control connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/custom_codecs/index.html">Custom codecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/detachable_types/index.html">Detachable types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/integration/index.html">Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/logging/index.html">Logging</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../core/metadata/index.html">Metadata</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../core/metadata/node/index.html">Node metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../core/metadata/schema/index.html">Schema metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../core/metadata/token/index.html">Token metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/metrics/index.html">Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/non_blocking/index.html">Non-blocking programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/paging/index.html">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/performance/index.html">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/pooling/index.html">Connection pooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/reactive/index.html">Reactive Style Programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/reconnection/index.html">Reconnection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/request_tracker/index.html">Request tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/retries/index.html">Retries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/ssl/index.html">SSL</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../core/statements/index.html">Statements</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../core/statements/batch/index.html">Batch statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../core/statements/per_query_keyspace/index.html">Per-query keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../core/statements/prepared/index.html">Prepared statements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../core/statements/simple/index.html">Simple statements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/temporal_types/index.html">Temporal types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/throttling/index.html">Request throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/tracing/index.html">Query tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/tuples/index.html">Tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../core/udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../developer/index.html">Developer docs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/admin/index.html">Administrative tasks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../developer/common/index.html">Common infrastructure</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/concurrency/index.html">Concurrency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/context/index.html">Driver context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../developer/common/event_bus/index.html">Event bus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/native_protocol/index.html">Native protocol layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/netty_pipeline/index.html">Netty pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../developer/request_execution/index.html">Request execution</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">Mapper</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="../../config/index.html">Integration</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../config/kotlin/index.html">Kotlin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/lombok/index.html">Lombok</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/record/index.html">Java 14 Records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../config/scala/index.html">Scala</a></li>
</ul>
</li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="../index.html">DAOs</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Custom result types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../delete/index.html">Delete methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getentity/index.html">GetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../increment/index.html">Increment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../insert/index.html">Insert methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../null_saving/index.html">Null saving strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../query/index.html">Query methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../queryprovider/index.html">Query provider methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../select/index.html">Select methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../setentity/index.html">SetEntity methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../statement_attributes/index.html">Statement attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../update/index.html">Update methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../entities/index.html">Entities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mapper/index.html">Mapper interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../osgi/index.html">OSGi</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../query_builder/index.html">Query builder</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/condition/index.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/delete/index.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/idempotence/index.html">Idempotence in the query builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/insert/index.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/relation/index.html">Relations</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../query_builder/schema/index.html">Schema builder</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/aggregate/index.html">Aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/function/index.html">Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/index/index.html">Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/keyspace/index.html">Keyspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/materialized_view/index.html">Materialized View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/table/index.html">Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_builder/schema/type/index.html">Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/select/index.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/term/index.html">Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/truncate/index.html">TRUNCATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_builder/update/index.html">UPDATE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Custom result types&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://java-driver.docs.scylladb.com/scylla-4.11.1.x/manual/mapper/daos/custom_types/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/java-driver/edit/scylla-4.11.1.x/docs/source/manual/mapper/daos/custom_types/index.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Custom result types</a><ul>
<li><a class="reference internal" href="#writing-the-producers">Writing the producers</a><ul>
<li><a class="reference internal" href="#future-of-void">Future of void</a></li>
<li><a class="reference internal" href="#future-of-entity">Future of entity</a></li>
<li><a class="reference internal" href="#matching-more-complex-types">Matching more complex types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#packaging-the-producers-in-a-service">Packaging the producers in a service</a></li>
<li><a class="reference internal" href="#disabling-custom-types">Disabling custom types</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 May 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>